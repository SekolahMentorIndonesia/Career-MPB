import{r as i,j as e,e as g,m as d}from"./index-B5frEt5u.js";const b=()=>{const[n,m]=i.useState([]),[x,l]=i.useState(!1),[a,c]=i.useState(null);i.useEffect(()=>{o()},[]);const o=async()=>{l(!0);try{const t=await(await fetch(`${window.API_BASE_URL}/api/notifications`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();t.success&&m(t.data)}catch(s){console.error("Error fetching notifications:",s)}finally{l(!1)}},h=async s=>{try{await fetch(`${window.API_BASE_URL}/api/notifications/mark-read`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({notification_id:s})}),o()}catch(t){console.error("Error marking as read:",t)}},u=s=>{c(s),s.is_read||h(s.id)},r=()=>{c(null)};return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Notifikasi"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Pemberitahuan terbaru mengenai akun dan lamaran Anda."}),x?e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 flex flex-col items-center justify-center h-96",children:[e.jsx(g,{className:"h-12 w-12 text-blue-500 animate-spin mb-4"}),e.jsx("p",{children:"Memuat notifikasi..."})]}):n.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 flex flex-col items-center justify-center text-center h-96",children:[e.jsx(d,{className:"h-16 w-16 text-gray-400 mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Belum Ada Notifikasi"}),e.jsx("p",{className:"text-gray-600",children:"Anda akan menerima notifikasi di sini jika ada pembaruan terkait lamaran Anda."})]}):e.jsx("div",{className:"space-y-4",children:n.map(s=>e.jsxs("div",{className:`bg-white rounded-xl shadow-sm border p-4 flex items-start gap-4 transition-all hover:shadow-md cursor-pointer ${s.is_read?"border-gray-100":"border-l-4 border-l-blue-500 bg-blue-50/30"}`,onClick:()=>u(s),children:[e.jsx("div",{className:`p-2 rounded-lg ${s.is_read?"bg-gray-100 text-gray-400":"bg-blue-100 text-blue-600"}`,children:e.jsx(d,{className:"h-5 w-5"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-base ${s.is_read?"font-semibold text-gray-700":"font-bold text-gray-900"}`,children:s.title||"Pemberitahuan"}),e.jsx("p",{className:`text-sm ${s.is_read?"text-gray-600":"text-gray-800"}`,children:s.subject||"Informasi Terbaru"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1 line-clamp-1",children:s.message})]}),e.jsx("div",{className:"flex flex-col items-end gap-2",children:e.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-wider whitespace-nowrap ml-2",children:new Date(s.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})})]})})]},s.id))}),a&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:r}),e.jsxs("div",{className:"relative w-full max-w-lg rounded-lg bg-white shadow-xl overflow-hidden animate-in fade-in zoom-in duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:a.title||"Detail Notifikasi"}),e.jsxs("button",{onClick:r,className:"text-gray-400 hover:text-gray-500",children:[e.jsx("span",{className:"sr-only",children:"Tutup"}),e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider mb-1",children:"Subjek"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:a.subject||"-"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider mb-1",children:"Pesan"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:a.message})]}),e.jsxs("div",{className:"text-right text-xs text-gray-400",children:["Diterima pada ",new Date(a.created_at).toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),e.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 flex flex-row-reverse gap-2",children:e.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:w-auto sm:text-sm",onClick:r,children:"Tutup"})})]})]})]})};export{b as default};
