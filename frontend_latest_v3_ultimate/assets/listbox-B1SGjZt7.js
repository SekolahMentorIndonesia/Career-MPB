import{t as Se,T as Fe,a1 as ue,x as $e,k as Me,p as ke,c as ee,e as h,f as Z,g as Te,G as Ce,h as Ae,Z as _e,j as Ne,m as Ve,n as Be,u as ze,q as H,S as E,o as Qe,a2 as Ue,a3 as He,V as Ke,A as qe,r as je,D as Ge,F as We,a4 as Je,L as Ye,s as X,v as O,a5 as Ze,w as Xe,N as et,H as tt,$ as nt,y as ot,z as it,B as st,I as at,K as ve,M as lt,O as rt,P as ut,U as ct,R as dt,J as pt,d as ft,a6 as vt,a7 as be,Q as bt,W as mt,a0 as ht}from"./element-movement-B5hWxci9.js";import{r as f,R as w,p as ce}from"./index-B5frEt5u.js";import{o as M,u as K,Y as j,A as me,y as G,n as de,K as W,c as xt,i as ne,V as Ie,a as gt,N as Ot,p as St,x as $t,s as It,b as yt}from"./open-closed-BNHp7105.js";let he=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function xe(e){var i,t;let n=(i=e.innerText)!=null?i:"",o=e.cloneNode(!0);if(!Se(o))return n;let s=!1;for(let u of o.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))u.remove(),s=!0;let r=s?(t=o.innerText)!=null?t:"":n;return he.test(r)&&(r=r.replace(he,"")),r}function Et(e){let i=e.getAttribute("aria-label");if(typeof i=="string")return i.trim();let t=e.getAttribute("aria-labelledby");if(t){let n=t.split(" ").map(o=>{let s=document.getElementById(o);if(s){let r=s.getAttribute("aria-label");return typeof r=="string"?r.trim():xe(s).trim()}return null}).filter(Boolean);if(n.length>0)return n.join(", ")}return xe(e).trim()}function Rt(e){let i=f.useRef(""),t=f.useRef("");return M(()=>{let n=e.current;if(!n)return"";let o=n.innerText;if(i.current===o)return t.current;let s=Et(n).trim().toLowerCase();return i.current=o,t.current=s,s})}var Pt=Object.defineProperty,Lt=(e,i,t)=>i in e?Pt(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t,ge=(e,i,t)=>(Lt(e,typeof i!="symbol"?i+"":i,t),t),S=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(S||{}),B=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(B||{}),te=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(te||{}),ye=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.SelectOption=5]="SelectOption",e[e.RegisterOptions=6]="RegisterOptions",e[e.UnregisterOptions=7]="UnregisterOptions",e[e.SetButtonElement=8]="SetButtonElement",e[e.SetOptionsElement=9]="SetOptionsElement",e[e.SortOptions=10]="SortOptions",e[e.MarkButtonAsMoved=11]="MarkButtonAsMoved",e))(ye||{});function Oe(e,i=t=>t){let t=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,n=Ce(i(e.options.slice()),s=>s.dataRef.current.domRef.current),o=t?n.indexOf(t):null;return o===-1&&(o=null),{options:n,activeOptionIndex:o}}let Dt={1(e){if(e.dataRef.current.disabled||e.listboxState===1)return e;let i=e.buttonElement?ee.Tracked(Te(e.buttonElement)):e.buttonPositionState;return{...e,activeOptionIndex:null,pendingFocus:{focus:h.Nothing},listboxState:1,__demoMode:!1,buttonPositionState:i}},0(e,i){if(e.dataRef.current.disabled||e.listboxState===0)return e;let t=e.activeOptionIndex,{isSelected:n}=e.dataRef.current,o=e.options.findIndex(s=>n(s.dataRef.current.value));return o!==-1&&(t=o),{...e,frozenValue:!1,pendingFocus:i.focus,listboxState:0,activeOptionIndex:t,__demoMode:!1,buttonPositionState:ee.Idle}},2(e,i){var t,n,o,s,r;if(e.dataRef.current.disabled||e.listboxState===1)return e;let u={...e,searchQuery:"",activationTrigger:(t=i.trigger)!=null?t:1,__demoMode:!1};if(i.focus===h.Nothing)return{...u,activeOptionIndex:null};if(i.focus===h.Specific)return{...u,activeOptionIndex:e.options.findIndex(b=>b.id===i.id)};if(i.focus===h.Previous){let b=e.activeOptionIndex;if(b!==null){let g=e.options[b].dataRef.current.domRef,d=Z(i,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:a=>a.id,resolveDisabled:a=>a.dataRef.current.disabled});if(d!==null){let a=e.options[d].dataRef.current.domRef;if(((n=g.current)==null?void 0:n.previousElementSibling)===a.current||((o=a.current)==null?void 0:o.previousElementSibling)===null)return{...u,activeOptionIndex:d}}}}else if(i.focus===h.Next){let b=e.activeOptionIndex;if(b!==null){let g=e.options[b].dataRef.current.domRef,d=Z(i,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:a=>a.id,resolveDisabled:a=>a.dataRef.current.disabled});if(d!==null){let a=e.options[d].dataRef.current.domRef;if(((s=g.current)==null?void 0:s.nextElementSibling)===a.current||((r=a.current)==null?void 0:r.nextElementSibling)===null)return{...u,activeOptionIndex:d}}}}let m=Oe(e),c=Z(i,{resolveItems:()=>m.options,resolveActiveIndex:()=>m.activeOptionIndex,resolveId:b=>b.id,resolveDisabled:b=>b.dataRef.current.disabled});return{...u,...m,activeOptionIndex:c}},3:(e,i)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let t=e.searchQuery!==""?0:1,n=e.searchQuery+i.value.toLowerCase(),o=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+t).concat(e.options.slice(0,e.activeOptionIndex+t)):e.options).find(r=>{var u;return!r.dataRef.current.disabled&&((u=r.dataRef.current.textValue)==null?void 0:u.startsWith(n))}),s=o?e.options.indexOf(o):-1;return s===-1||s===e.activeOptionIndex?{...e,searchQuery:n}:{...e,searchQuery:n,activeOptionIndex:s,activationTrigger:1}},4(e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},5(e){return e.dataRef.current.mode===0?{...e,frozenValue:!0}:{...e}},6:(e,i)=>{let t=e.options.concat(i.options),n=e.activeOptionIndex;if(e.pendingFocus.focus!==h.Nothing&&(n=Z(e.pendingFocus,{resolveItems:()=>t,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:o=>o.id,resolveDisabled:o=>o.dataRef.current.disabled})),e.activeOptionIndex===null){let{isSelected:o}=e.dataRef.current;if(o){let s=t.findIndex(r=>o?.(r.dataRef.current.value));s!==-1&&(n=s)}}return{...e,options:t,activeOptionIndex:n,pendingFocus:{focus:h.Nothing},pendingShouldSort:!0}},7:(e,i)=>{let t=e.options,n=[],o=new Set(i.options);for(let[s,r]of t.entries())if(o.has(r.id)&&(n.push(s),o.delete(r.id),o.size===0))break;if(n.length>0){t=t.slice();for(let s of n.reverse())t.splice(s,1)}return{...e,options:t,activationTrigger:1}},8:(e,i)=>e.buttonElement===i.element?e:{...e,buttonElement:i.element},9:(e,i)=>e.optionsElement===i.element?e:{...e,optionsElement:i.element},10:e=>e.pendingShouldSort?{...e,...Oe(e),pendingShouldSort:!1}:e,11(e){return e.buttonPositionState.kind!=="Tracked"?e:{...e,buttonPositionState:ee.Moved}}};class pe extends Fe{constructor(i){super(i),ge(this,"actions",{onChange:t=>{let{onChange:n,compare:o,mode:s,value:r}=this.state.dataRef.current;return K(s,{0:()=>n?.(t),1:()=>{let u=r.slice(),m=u.findIndex(c=>o(c,t));return m===-1?u.push(t):u.splice(m,1),n?.(u)}})},registerOption:ue(()=>{let t=[],n=new Set;return[(o,s)=>{n.has(s)||(n.add(s),t.push({id:o,dataRef:s}))},()=>(n.clear(),this.send({type:6,options:t.splice(0)}))]}),unregisterOption:ue(()=>{let t=[];return[n=>t.push(n),()=>{this.send({type:7,options:t.splice(0)})}]}),goToOption:ue(()=>{let t=null;return[(n,o)=>{t={type:2,...n,trigger:o}},()=>t&&this.send(t)]}),closeListbox:()=>{this.send({type:1})},openListbox:t=>{this.send({type:0,focus:t})},selectActiveOption:()=>{var t;if(this.state.activeOptionIndex!==null){let{dataRef:n}=this.state.options[this.state.activeOptionIndex];this.actions.selectOption(n.current.value)}else this.state.dataRef.current.mode===0&&(this.actions.closeListbox(),(t=this.state.buttonElement)==null||t.focus({preventScroll:!0}))},selectOption:t=>{this.send({type:5,value:t})},search:t=>{this.send({type:3,value:t})},clearSearch:()=>{this.send({type:4})},setButtonElement:t=>{this.send({type:8,element:t})},setOptionsElement:t=>{this.send({type:9,element:t})}}),ge(this,"selectors",{activeDescendantId(t){var n;let o=t.activeOptionIndex,s=t.options;return o===null||(n=s[o])==null?void 0:n.id},isActive(t,n){var o;let s=t.activeOptionIndex,r=t.options;return s!==null?((o=r[s])==null?void 0:o.id)===n:!1},hasFrozenValue(t){return t.frozenValue},shouldScrollIntoView(t,n){return t.__demoMode||t.listboxState!==0||t.activationTrigger===0?!1:this.isActive(t,n)},didButtonMove(t){return t.buttonPositionState.kind==="Moved"}}),this.on(6,()=>{requestAnimationFrame(()=>{this.send({type:10})})});{let t=this.state.id,n=$e.get(null);this.disposables.add(n.on(Me.Push,o=>{!n.selectors.isTop(o,t)&&this.state.listboxState===0&&this.actions.closeListbox()})),this.on(0,()=>n.actions.push(t)),this.on(1,()=>n.actions.pop(t))}this.disposables.group(t=>{this.on(1,n=>{n.buttonElement&&(t.dispose(),t.add(ke(n.buttonElement,n.buttonPositionState,()=>{this.send({type:11})})))})}),this.on(5,(t,n)=>{var o;this.actions.onChange(n.value),this.state.dataRef.current.mode===0&&(this.actions.closeListbox(),(o=this.state.buttonElement)==null||o.focus({preventScroll:!0}))})}static new({id:i,__demoMode:t=!1}){return new pe({id:i,dataRef:{current:{}},listboxState:t?0:1,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1,buttonElement:null,optionsElement:null,pendingShouldSort:!1,pendingFocus:{focus:h.Nothing},frozenValue:!1,__demoMode:t,buttonPositionState:ee.Idle})}reduce(i,t){return K(t.type,Dt,i,t)}}const Ee=f.createContext(null);function fe(e){let i=f.useContext(Ee);if(i===null){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Re),t}return i}function Re({id:e,__demoMode:i=!1}){let t=f.useMemo(()=>pe.new({id:e,__demoMode:i}),[]);return Ae(()=>t.dispose()),t}let oe=f.createContext(null);oe.displayName="ListboxDataContext";function J(e){let i=f.useContext(oe);if(i===null){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,J),t}return i}let wt=f.Fragment;function Ft(e,i){let t=f.useId(),n=Ne(),{value:o,defaultValue:s,form:r,name:u,onChange:m,by:c,invalid:b=!1,disabled:g=n||!1,horizontal:d=!1,multiple:a=!1,__demoMode:x=!1,...L}=e;const R=d?"horizontal":"vertical";let _=G(i),F=Ve(s),[$=a?[]:void 0,P]=Be(o,m,F),I=Re({id:t,__demoMode:x}),N=f.useRef({static:!1,hold:!1}),z=f.useRef(new Map),k=ze(c),Q=f.useCallback(y=>K(p.mode,{[B.Multi]:()=>$.some(q=>k(q,y)),[B.Single]:()=>k($,y)}),[$]),p=H({value:$,disabled:g,invalid:b,mode:a?B.Multi:B.Single,orientation:R,onChange:P,compare:k,isSelected:Q,optionsPropsRef:N,listRef:z});de(()=>{I.state.dataRef.current=p},[p]);let D=E(I,y=>y.listboxState),T=$e.get(null),U=E(T,f.useCallback(y=>T.selectors.isTop(y,t),[T,t])),[C,v]=E(I,y=>[y.buttonElement,y.optionsElement]);Qe(U,[C,v],(y,q)=>{I.send({type:ye.CloseListbox}),Ue(q,He.Loose)||(y.preventDefault(),C?.focus())});let A=H({open:D===S.Open,disabled:g,invalid:b,value:$}),[ie,se]=Ke({inherit:!0}),Y={ref:_},ae=f.useCallback(()=>{if(F!==void 0)return P?.(F)},[P,F]),le=W();return w.createElement(se,{value:ie,props:{htmlFor:C?.id},slot:{open:D===S.Open,disabled:g}},w.createElement(qe,null,w.createElement(Ee.Provider,{value:I},w.createElement(oe.Provider,{value:p},w.createElement(xt,{value:K(D,{[S.Open]:ne.Open,[S.Closed]:ne.Closed})},u!=null&&$!=null&&w.createElement(je,{disabled:g,data:{[u]:$},form:r,onReset:ae}),le({ourProps:Y,theirProps:L,slot:A,defaultTag:wt,name:"Listbox"}))))))}let Mt="button";function kt(e,i){let t=f.useId(),n=Ge(),o=J("Listbox.Button"),s=fe("Listbox.Button"),{id:r=n||`headlessui-listbox-button-${t}`,disabled:u=o.disabled||!1,autoFocus:m=!1,...c}=e,b=G(i,We(),s.actions.setButtonElement),g=Je(),[d,a,x]=E(s,v=>[v.listboxState,v.buttonElement,v.optionsElement]),L=d===S.Open;Ye(L,{trigger:a,action:f.useCallback(v=>{if(a!=null&&a.contains(v.target))return X.Ignore;let A=v.target.closest('[role="option"]:not([data-disabled])');return Se(A)?X.Select(A):x!=null&&x.contains(v.target)?X.Ignore:X.Close},[a,x]),close:s.actions.closeListbox,select:s.actions.selectActiveOption});let R=M(v=>{switch(v.key){case O.Enter:Ze(v.currentTarget);break;case O.Space:case O.ArrowDown:v.preventDefault(),s.actions.openListbox({focus:o.value?h.Nothing:h.First});break;case O.ArrowUp:v.preventDefault(),s.actions.openListbox({focus:o.value?h.Nothing:h.Last});break}}),_=M(v=>{v.key===O.Space&&v.preventDefault()}),F=Xe(v=>{var A;s.state.listboxState===S.Open?(ce.flushSync(()=>s.actions.closeListbox()),(A=s.state.buttonElement)==null||A.focus({preventScroll:!0})):(v.preventDefault(),s.actions.openListbox({focus:h.Nothing}))}),$=M(v=>v.preventDefault()),P=et([r]),I=tt(),{isFocusVisible:N,focusProps:z}=nt({autoFocus:m}),{isHovered:k,hoverProps:Q}=ot({isDisabled:u}),{pressed:p,pressProps:D}=it({disabled:u}),T=H({open:d===S.Open,active:p||d===S.Open,disabled:u,invalid:o.invalid,value:o.value,hover:k,focus:N,autofocus:m}),U=E(s,v=>v.listboxState===S.Open),C=Ie(g(),{ref:b,id:r,type:st(e,a),"aria-haspopup":"listbox","aria-controls":x?.id,"aria-expanded":U,"aria-labelledby":P,"aria-describedby":I,disabled:u||void 0,autoFocus:m,onKeyDown:R,onKeyUp:_,onKeyPress:$},F,z,Q,D);return W()({ourProps:C,theirProps:c,slot:T,defaultTag:Mt,name:"Listbox.Button"})}let Pe=f.createContext(!1),Tt="div",Ct=me.RenderStrategy|me.Static;function At(e,i){let t=f.useId(),{id:n=`headlessui-listbox-options-${t}`,anchor:o,portal:s=!1,modal:r=!0,transition:u=!1,...m}=e,c=at(o),[b,g]=f.useState(null);c&&(s=!0);let d=J("Listbox.Options"),a=fe("Listbox.Options"),[x,L,R,_]=E(a,l=>[l.listboxState,l.buttonElement,l.optionsElement,l.__demoMode]),F=ve(L),$=ve(R),P=gt(),[I,N]=Ot(u,b,P!==null?(P&ne.Open)===ne.Open:x===S.Open);lt(I,L,a.actions.closeListbox);let z=_?!1:r&&x===S.Open;rt(z,$);let k=_?!1:r&&x===S.Open;ut(k,{allowed:f.useCallback(()=>[L,R],[L,R])});let Q=E(a,a.selectors.didButtonMove)?!1:I,p=E(a,a.selectors.hasFrozenValue)&&!e.static,D=ct(p,d.value),T=f.useCallback(l=>d.compare(D,l),[d.compare,D]),U=E(a,l=>{var V;if(c==null||!((V=c?.to)!=null&&V.includes("selection")))return null;let re=l.options.findIndex(we=>T(we.dataRef.current.value));return re===-1&&(re=0),re}),C=(()=>{if(c==null)return;if(U===null)return{...c,inner:void 0};let l=Array.from(d.listRef.current.values());return{...c,inner:{listRef:{current:l},index:U}}})(),[v,A]=dt(C),ie=pt(),se=G(i,c?v:null,a.actions.setOptionsElement,g),Y=St();f.useEffect(()=>{let l=R;l&&x===S.Open&&(ft(l)||l==null||l.focus({preventScroll:!0}))},[x,R]);let ae=M(l=>{var V;switch(Y.dispose(),l.key){case O.Space:if(a.state.searchQuery!=="")return l.preventDefault(),l.stopPropagation(),a.actions.search(l.key);case O.Enter:l.preventDefault(),l.stopPropagation(),a.actions.selectActiveOption();break;case K(d.orientation,{vertical:O.ArrowDown,horizontal:O.ArrowRight}):return l.preventDefault(),l.stopPropagation(),a.actions.goToOption({focus:h.Next});case K(d.orientation,{vertical:O.ArrowUp,horizontal:O.ArrowLeft}):return l.preventDefault(),l.stopPropagation(),a.actions.goToOption({focus:h.Previous});case O.Home:case O.PageUp:return l.preventDefault(),l.stopPropagation(),a.actions.goToOption({focus:h.First});case O.End:case O.PageDown:return l.preventDefault(),l.stopPropagation(),a.actions.goToOption({focus:h.Last});case O.Escape:l.preventDefault(),l.stopPropagation(),ce.flushSync(()=>a.actions.closeListbox()),(V=a.state.buttonElement)==null||V.focus({preventScroll:!0});return;case O.Tab:l.preventDefault(),l.stopPropagation(),ce.flushSync(()=>a.actions.closeListbox()),vt(a.state.buttonElement,l.shiftKey?be.Previous:be.Next);break;default:l.key.length===1&&(a.actions.search(l.key),Y.setTimeout(()=>a.actions.clearSearch(),350));break}}),le=E(a,l=>{var V;return(V=l.buttonElement)==null?void 0:V.id}),y=H({open:x===S.Open}),q=Ie(c?ie():{},{id:n,ref:se,"aria-activedescendant":E(a,a.selectors.activeDescendantId),"aria-multiselectable":d.mode===B.Multi?!0:void 0,"aria-labelledby":le,"aria-orientation":d.orientation,onKeyDown:ae,role:"listbox",tabIndex:x===S.Open?0:void 0,style:{...m.style,...A,"--button-width":bt(I,L,!0).width},...$t(N)}),Le=W(),De=f.useMemo(()=>d.mode===B.Multi?d:{...d,isSelected:T},[d,T]);return w.createElement(mt,{enabled:s?e.static||I:!1,ownerDocument:F},w.createElement(oe.Provider,{value:De},Le({ourProps:q,theirProps:m,slot:y,defaultTag:Tt,features:Ct,visible:Q,name:"Listbox.Options"})))}let _t="div";function Nt(e,i){let t=f.useId(),{id:n=`headlessui-listbox-option-${t}`,disabled:o=!1,value:s,...r}=e,u=f.useContext(Pe)===!0,m=J("Listbox.Option"),c=fe("Listbox.Option"),b=E(c,p=>c.selectors.isActive(p,n)),g=m.isSelected(s),d=f.useRef(null),a=Rt(d),x=It({disabled:o,value:s,domRef:d,get textValue(){return a()}}),L=G(i,d,p=>{p?m.listRef.current.set(n,p):m.listRef.current.delete(n)}),R=E(c,p=>c.selectors.shouldScrollIntoView(p,n));de(()=>{if(R)return yt().requestAnimationFrame(()=>{var p,D;(D=(p=d.current)==null?void 0:p.scrollIntoView)==null||D.call(p,{block:"nearest"})})},[R,d]),de(()=>{if(!u)return c.actions.registerOption(n,x),()=>c.actions.unregisterOption(n)},[x,n,u]);let _=M(p=>{if(o)return p.preventDefault();c.actions.selectOption(s)}),F=M(()=>{if(o)return c.actions.goToOption({focus:h.Nothing});c.actions.goToOption({focus:h.Specific,id:n})}),$=ht(),P=M(p=>$.update(p)),I=M(p=>{$.wasMoved(p)&&(o||b&&c.state.activationTrigger===te.Pointer||c.actions.goToOption({focus:h.Specific,id:n},te.Pointer))}),N=M(p=>{$.wasMoved(p)&&(o||b&&c.state.activationTrigger===te.Pointer&&c.actions.goToOption({focus:h.Nothing}))}),z=H({active:b,focus:b,selected:g,disabled:o,selectedOption:g&&u}),k=u?{}:{id:n,ref:L,role:"option",tabIndex:o===!0?void 0:-1,"aria-disabled":o===!0?!0:void 0,"aria-selected":g,disabled:void 0,onClick:_,onFocus:F,onPointerEnter:P,onMouseEnter:P,onPointerMove:I,onMouseMove:I,onPointerLeave:N,onMouseLeave:N},Q=W();return!g&&u?null:Q({ourProps:k,theirProps:r,slot:z,defaultTag:_t,name:"Listbox.Option"})}let Vt=f.Fragment;function Bt(e,i){let{options:t,placeholder:n,...o}=e,s={ref:G(i)},r=J("ListboxSelectedOption"),u=H({}),m=r.value===void 0||r.value===null||r.mode===B.Multi&&Array.isArray(r.value)&&r.value.length===0,c=W();return w.createElement(Pe.Provider,{value:!0},c({ourProps:s,theirProps:{...o,children:w.createElement(w.Fragment,null,n&&m?n:t)},slot:u,defaultTag:Vt,name:"ListboxSelectedOption"}))}let zt=j(Ft),Qt=j(kt),Ut=_e,Ht=j(At),Kt=j(Nt),qt=j(Bt),Jt=Object.assign(zt,{Button:Qt,Label:Ut,Options:Ht,Option:Kt,SelectedOption:qt});export{Ht as B,Kt as I,Jt as M,Qt as a};
