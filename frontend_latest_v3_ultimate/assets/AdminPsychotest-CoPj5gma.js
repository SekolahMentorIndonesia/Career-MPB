import{c as M,r as l,d as se,j as e,U as C,h as a,F as j,e as te,B as ae,X as re,C as ie,o as le}from"./index-B5frEt5u.js";import{C as ne}from"./ConfirmationModal-2kZPKyqO.js";import{S as oe}from"./search-BhyPs1tm.js";import{L as ce}from"./link-Ga9T1P8b.js";import{U as de}from"./user-BRxEefNs.js";import{E as me,P as xe}from"./pencil-line-CoTPCWqI.js";import{S as ue}from"./save-DWpH1zYC.js";import{C as he}from"./clock-CxqBU5kU.js";import{P as D}from"./plus-C0ZJ9zGq.js";import{T as $}from"./trash-2-PlqAtpsV.js";import{C as pe,a as ge}from"./element-movement-B5hWxci9.js";import{H as be,k as ye,B as fe,U as je,a as Ne}from"./combobox-CCreJGnk.js";import"./open-closed-BNHp7105.js";const we=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],ve=M("chart-no-axes-column-increasing",we);const ke=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],_e=M("copy",ke),Oe=()=>{const[o,N]=l.useState("participants"),[G,w]=l.useState(!1),[g,P]=l.useState(null),[v,A]=l.useState(""),[x,O]=l.useState([]),[q,L]=l.useState(!1),{showNotification:c}=se(),[b,F]=l.useState(""),B=b===""?x.filter(s=>s.status==="Tes Psikotes"||s.status==="Psikotes"):x.filter(s=>(s.status==="Tes Psikotes"||s.status==="Psikotes")&&(s.applicant_name.toLowerCase().includes(b.toLowerCase())||s.applicant_email.toLowerCase().includes(b.toLowerCase()))),[y,z]=l.useState([]),[Se,T]=l.useState(!1),[r,u]=l.useState({use_multiple_choice:"1",multiple_choice_count:"10",use_essay:"1",essay_count:"2",test_duration_minutes:"60"}),[Q,R]=l.useState(null),[d,k]=l.useState(!1),[K,p]=l.useState(!1),[n,h]=l.useState({type:"multiple_choice",question:"",options:["","","",""],answer_key:""}),[H,f]=l.useState(!1),[E,_]=l.useState(null),I=async()=>{L(!0);try{const t=await(await fetch(`${window.API_BASE_URL}/api/applications`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();if(t.success){const i=t.data.filter(m=>["Psikotes","Interview","Final","Diterima"].includes(m.status));O(i)}}catch(s){console.error("Error fetching participants:",s)}finally{L(!1)}},S=async()=>{T(!0);try{const t=await(await fetch(`${window.API_BASE_URL}/api/admin/psychotest/questions`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();t.success&&z(t.data)}catch(s){console.error("Error fetching questions:",s)}finally{T(!1)}},J=async()=>{try{const t=await(await fetch(`${window.API_BASE_URL}/api/admin/psychotest/summary`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();t.success&&R(t.data)}catch(s){console.error("Error fetching summary:",s)}},U=async()=>{try{const t=await(await fetch(`${window.API_BASE_URL}/api/admin/psychotest/settings`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();t.success&&u(t.data)}catch(s){console.error("Error fetching settings:",s)}};l.useEffect(()=>{o==="participants"&&I(),o==="questions"&&(S(),U()),o==="summary"&&J()},[o]);const V=async()=>{try{const t=await(await fetch(`${window.API_BASE_URL}/api/admin/psychotest/settings`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:r})})).json();t.success?c("success","Berhasil","Pengaturan berhasil disimpan"):c("error","Gagal",t.message||"Gagal menyimpan pengaturan")}catch{c("error","Kesalahan","Terjadi kesalahan koneksi")}},X=async s=>{if(s.preventDefault(),!n.question)return alert("Pertanyaan wajib diisi");if(n.type==="multiple_choice"){if(n.options.some(t=>!t))return alert("Semua opsi jawaban harus diisi");if(!n.answer_key)return alert("Kunci jawaban harus dipilih")}try{const i=await(await fetch(`${window.API_BASE_URL}/api/admin/psychotest/questions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(n)})).json();i.success?(c("success","Berhasil","Soal berhasil ditambahkan"),p(!1),S(),h({type:"multiple_choice",question:"",options:["","","",""],answer_key:""})):c("error","Gagal",i.message)}catch(t){console.error(t),c("error","Kesalahan","Terjadi kesalahan koneksi")}},W=async()=>{if(E)try{const t=await(await fetch(`${window.API_BASE_URL}/api/admin/psychotest/questions`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({id:E.id})})).json();t.success?(c("success","Berhasil","Soal berhasil dihapus"),S()):c("error","Gagal",t.message)}catch{c("error","Kesalahan","Terjadi kesalahan koneksi")}finally{f(!1),_(null)}},Y=()=>{w(!0),P(null),A("")},Z=()=>{const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let i=0;i<6;i++)t+=s.charAt(Math.floor(Math.random()*s.length));return t},ee=async()=>{if(g){const s=Z(),t=`${window.location.origin}/test-psikotes/${s}?app=${g.id}`;try{const m=await(await fetch(`${window.API_BASE_URL}/api/applications/generate-link`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({application_id:g.id,link:t})})).json();m.success?(A(t),I(),c("success","Link Terkirim","Link berhasil dibuat dan notifikasi telah dikirim ke user!")):c("error","Gagal",m.message||"Gagal generate link")}catch(i){console.error("Error generating link:",i),c("error","Kesalahan","Terjadi kesalahan koneksi")}}else c("info","Peserta Kosong","Pilih peserta terlebih dahulu!")};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Manajemen Psikotes"}),e.jsx("p",{className:"text-gray-600",children:"Atur soal dan pantau peserta psikotes"})]})}),e.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-100 p-0 overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200 overflow-x-auto scrollbar-hide",children:e.jsxs("nav",{className:"-mb-px flex space-x-8 px-6 min-w-max","aria-label":"Tabs",children:[e.jsxs("button",{onClick:()=>N("participants"),className:a(o==="participants"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","group inline-flex items-center py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap"),children:[e.jsx(C,{className:a(o==="participants"?"text-blue-600":"text-gray-400 group-hover:text-gray-500","-ml-0.5 mr-2 h-5 w-5")}),e.jsx("span",{children:"Daftar Peserta"})]}),e.jsxs("button",{onClick:()=>N("questions"),className:a(o==="questions"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","group inline-flex items-center py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap"),children:[e.jsx(j,{className:a(o==="questions"?"text-blue-600":"text-gray-400 group-hover:text-gray-500","-ml-0.5 mr-2 h-5 w-5")}),e.jsx("span",{children:"Bank Soal"})]}),e.jsxs("button",{onClick:()=>N("summary"),className:a(o==="summary"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","group inline-flex items-center py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap"),children:[e.jsx(ve,{className:a(o==="summary"?"text-blue-600":"text-gray-400 group-hover:text-gray-500","-ml-0.5 mr-2 h-5 w-5")}),e.jsx("span",{children:"Ringkasan"})]})]})}),e.jsxs("div",{className:"p-6",children:[o==="participants"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[e.jsxs("div",{className:"relative w-full sm:w-1/2",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(oe,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Cari peserta...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsx("div",{className:"flex gap-2 w-full sm:w-auto",children:e.jsxs("button",{onClick:Y,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),"Generate Link"]})})]}),q?e.jsxs("div",{className:"text-center py-10 text-gray-500",children:[e.jsx(te,{className:"mx-auto h-12 w-12 text-blue-500 animate-spin mb-2"}),e.jsx("p",{children:"Memuat data peserta..."})]}):x.length===0?e.jsxs("div",{className:"text-center py-10 text-gray-500",children:[e.jsx(C,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Belum ada peserta pada tahap psikotes."})]}):e.jsxs("div",{className:"overflow-hidden border border-gray-100 rounded-xl",children:[e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nama Peserta"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Posisi"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status Aplikasi"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hasil Akhir"}),e.jsx("th",{scope:"col",className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"Aksi"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.jsx("div",{children:s.applicant_name}),e.jsx("div",{className:"text-xs text-gray-500 font-normal",children:s.applicant_email})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-xs",children:s.job_title}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("span",{className:"px-2.5 py-1 inline-flex text-xs leading-5 font-bold rounded-full bg-blue-50 text-blue-700 border border-blue-100",children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.psychotest_results?e.jsxs("span",{className:a("px-2.5 py-1 inline-flex text-xs leading-5 font-bold rounded-full border",s.psychotest_score>=50?"bg-green-50 text-green-700 border-green-100":"bg-red-50 text-red-700 border-red-100"),children:["Score: ",s.psychotest_score]}):e.jsx("span",{className:"text-gray-300 italic text-xs",children:"Belum dikerjakan"})})]},s.id))})]})}),e.jsx("div",{className:"md:hidden divide-y divide-gray-100",children:x.map(s=>e.jsxs("div",{className:"p-4 space-y-3 bg-white",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"text-sm font-black text-gray-900 leading-tight",children:s.applicant_name}),e.jsx("p",{className:"text-[10px] text-gray-500 font-medium",children:s.applicant_email})]}),e.jsx("span",{className:"px-2 py-0.5 text-[9px] font-black uppercase rounded-full bg-blue-50 text-blue-700 border border-blue-100",children:s.status})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-500",children:[e.jsx(ae,{className:"w-3 h-3"}),e.jsx("span",{className:"font-bold text-gray-700 truncate",children:s.job_title})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-50",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[9px] font-bold text-gray-400 uppercase mb-1",children:"Hasil Psikotes"}),s.psychotest_results?e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:a("px-2 py-0.5 text-[10px] font-black rounded-full border",s.psychotest_score>=50?"bg-green-50 text-green-700 border-green-100":"bg-red-50 text-red-700 border-red-100"),children:["Score: ",s.psychotest_score]})}):e.jsx("span",{className:"text-[10px] text-gray-300 font-bold italic",children:"Menunggu Pengerjaan"})]}),e.jsx("button",{className:"p-2 bg-gray-50 text-gray-600 rounded-lg border border-gray-100 active:scale-95 transition-all",children:e.jsx(de,{className:"w-4 h-4"})})]})]},s.id))})]})]}),o==="questions"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50 flex flex-col md:flex-row justify-between items-start md:items-center gap-4 md:gap-0",children:[e.jsxs("div",{className:"w-full md:w-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Konfigurasi Tes"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Atur komposisi dan durasi tes psikotes"})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsxs("button",{onClick:()=>{window.open(`${window.location.origin}/test-psikotes/demo?mode=preview`,"_blank")},className:"flex items-center text-sm bg-blue-50 text-blue-700 border border-blue-100 px-4 py-2 rounded-md hover:bg-blue-600 hover:text-white transition-all shadow-sm font-bold",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Uji Coba Tes"]}),d?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{k(!1),U()},className:"flex items-center text-sm bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-50 transition-colors shadow-sm",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Batal"]}),e.jsxs("button",{onClick:async()=>{await V(),k(!1)},className:"flex items-center text-sm bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors shadow-sm",children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Simpan"]})]}):e.jsxs("button",{onClick:()=>k(!0),className:"flex items-center text-sm bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-50 transition-colors shadow-sm",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Edit Pengaturan"]})]})]}),e.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700 mb-1",children:"Durasi Pengerjaan"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(he,{className:"w-5 h-5 text-gray-400 mr-2"}),e.jsx("input",{type:"number",id:"duration",disabled:!d,value:r.test_duration_minutes,onChange:s=>u({...r,test_duration_minutes:s.target.value}),className:a("w-24 px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",d?"bg-white border-gray-300":"bg-gray-100 text-gray-500 border-gray-200 cursor-not-allowed")}),e.jsx("span",{className:"ml-2 text-gray-600 font-medium",children:"Menit"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Waktu maksimal yang diberikan kepada peserta untuk menyelesaikan seluruh soal."})]}),e.jsx("hr",{className:"md:col-span-2 border-gray-100"}),e.jsxs("div",{className:a("p-4 rounded-lg border transition-all",r.use_multiple_choice==="1"?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{id:"multiple-choice",type:"checkbox",disabled:!d,className:a("h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",!d&&"cursor-not-allowed opacity-60"),checked:r.use_multiple_choice==="1",onChange:s=>u({...r,use_multiple_choice:s.target.checked?"1":"0"})}),e.jsx("label",{htmlFor:"multiple-choice",className:"font-semibold text-gray-800",children:"Pilihan Ganda"})]}),e.jsx("div",{className:a("p-2 rounded-full",r.use_multiple_choice==="1"?"bg-blue-100 text-blue-600":"bg-gray-200 text-gray-400"),children:e.jsx(ie,{className:"w-5 h-5"})})]}),r.use_multiple_choice==="1"&&e.jsxs("div",{className:"ml-8 animate-in fade-in slide-in-from-top-2 duration-200",children:[e.jsx("label",{htmlFor:"mc-count",className:"block text-sm text-gray-600 mb-1",children:"Jumlah Soal Ditampilkan:"}),e.jsx("input",{type:"number",id:"mc-count",disabled:!d,value:r.multiple_choice_count,onChange:s=>u({...r,multiple_choice_count:s.target.value}),className:a("w-full px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",d?"bg-white border-gray-300":"bg-gray-100 text-gray-500 border-gray-200 cursor-not-allowed")}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Soal akan dipilih secara acak dari bank soal."})]})]}),e.jsxs("div",{className:a("p-4 rounded-lg border transition-all",r.use_essay==="1"?"bg-purple-50 border-purple-200":"bg-gray-50 border-gray-200"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{id:"essay",type:"checkbox",disabled:!d,className:a("h-5 w-5 text-purple-600 focus:ring-purple-500 border-gray-300 rounded",!d&&"cursor-not-allowed opacity-60"),checked:r.use_essay==="1",onChange:s=>u({...r,use_essay:s.target.checked?"1":"0"})}),e.jsx("label",{htmlFor:"essay",className:"font-semibold text-gray-800",children:"Esai / Uraian"})]}),e.jsx("div",{className:a("p-2 rounded-full",r.use_essay==="1"?"bg-purple-100 text-purple-600":"bg-gray-200 text-gray-400"),children:e.jsx(j,{className:"w-5 h-5"})})]}),r.use_essay==="1"&&e.jsxs("div",{className:"ml-8 animate-in fade-in slide-in-from-top-2 duration-200",children:[e.jsx("label",{htmlFor:"essay-count",className:"block text-sm text-gray-600 mb-1",children:"Jumlah Soal Ditampilkan:"}),e.jsx("input",{type:"number",id:"essay-count",disabled:!d,value:r.essay_count,onChange:s=>u({...r,essay_count:s.target.value}),className:a("w-full px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",d?"bg-white border-gray-300":"bg-gray-100 text-gray-500 border-gray-200 cursor-not-allowed")}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Soal akan dipilih secara acak dari bank soal."})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[r.use_multiple_choice==="1"&&e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Bank Soal Pilihan Ganda"}),e.jsxs("button",{onClick:()=>{h({type:"multiple_choice",question:"",options:["","","",""],answer_key:""}),p(!0)},className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:[e.jsx(D,{className:"w-4 h-4 mr-1"})," Tambah Soal"]})]}),y.filter(s=>s.type==="multiple_choice").length===0?e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(j,{className:"mx-auto h-10 w-10 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm font-medium text-gray-900",children:"Belum ada soal pilihan ganda"})]}):e.jsx("ul",{className:"space-y-3",children:y.filter(s=>s.type==="multiple_choice").map((s,t)=>e.jsxs("li",{className:"bg-gray-50 border rounded-md p-3 relative group",children:[e.jsxs("div",{className:"pr-8",children:[e.jsxs("p",{className:"font-medium text-gray-900 text-sm mb-2",children:[t+1,". ",s.question]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600 ml-4",children:s.options&&s.options.map((i,m)=>e.jsxs("div",{className:a(i===s.answer_key?"text-green-600 font-bold":""),children:[String.fromCharCode(65+m),". ",i]},m))})]}),e.jsx("button",{onClick:()=>{_(s),f(!0)},className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx($,{className:"w-4 h-4"})})]},s.id))})]}),r.use_essay==="1"&&e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Bank Soal Esai"}),e.jsxs("button",{onClick:()=>{h({type:"essay",question:"",options:null,answer_key:null}),p(!0)},className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:[e.jsx(D,{className:"w-4 h-4 mr-1"})," Tambah Soal"]})]}),y.filter(s=>s.type==="essay").length===0?e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(j,{className:"mx-auto h-10 w-10 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm font-medium text-gray-900",children:"Belum ada soal esai"})]}):e.jsx("ul",{className:"space-y-3",children:y.filter(s=>s.type==="essay").map((s,t)=>e.jsxs("li",{className:"bg-gray-50 border rounded-md p-3 relative group",children:[e.jsxs("p",{className:"font-medium text-gray-900 text-sm",children:[t+1,". ",s.question]}),e.jsx("button",{onClick:()=>{_(s),f(!0)},className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx($,{className:"w-4 h-4"})})]},s.id))})]})]})]}),o==="summary"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Total Peserta"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:Q?.total_participants||0}),e.jsxs("div",{className:"mt-2 flex items-center text-xs text-blue-600",children:[e.jsx(C,{className:"w-3 h-3 mr-1"}),e.jsx("span",{children:"Mengerjakan Soal"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm p-6 overflow-hidden",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Hasil Detail Peserta"}),e.jsxs("div",{className:"overflow-hidden border border-gray-100 rounded-xl",children:[e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nama Peserta"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Skor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tanggal"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.filter(s=>s.psychotest_score!==null&&s.psychotest_score!==void 0).length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-10 text-center text-sm text-gray-500 italic",children:"Belum ada peserta yang menyelesaikan tes"})}):x.filter(s=>s.psychotest_score!==null&&s.psychotest_score!==void 0).map((s,t)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.applicant_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.psychotest_score}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:a("px-2.5 py-0.5 rounded-full text-xs font-bold",s.psychotest_score>=50?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:s.psychotest_score>=50?"Lulus":"Gagal"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400",children:s.updated_at?new Date(s.updated_at).toLocaleDateString("id-ID"):"-"})]},t))})]})}),e.jsx("div",{className:"md:hidden divide-y divide-gray-100",children:x.filter(s=>s.psychotest_score!==null&&s.psychotest_score!==void 0).length===0?e.jsx("div",{className:"p-10 text-center text-sm text-gray-400 italic",children:"Belum ada peserta selesai"}):x.filter(s=>s.psychotest_score!==null&&s.psychotest_score!==void 0).map((s,t)=>e.jsxs("div",{className:"p-4 flex items-center justify-between bg-white hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 leading-tight",children:s.applicant_name}),e.jsx("p",{className:"text-[10px] text-gray-400",children:s.updated_at?new Date(s.updated_at).toLocaleDateString("id-ID"):"-"})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsxs("span",{className:"text-[10px] font-black text-gray-900",children:["Score: ",s.psychotest_score]}),e.jsx("span",{className:a("px-2 py-0.5 rounded-full text-[9px] font-black uppercase",s.psychotest_score>=50?"bg-green-50 text-green-700":"bg-red-50 text-red-700"),children:s.psychotest_score>=50?"Lulus":"Gagal"})]})]},t))})]})]})]})]}),K&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>p(!1)}),e.jsxs("div",{className:"relative w-full max-w-lg rounded-lg bg-white shadow-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4",children:["Tambah Soal ",n.type==="multiple_choice"?"Pilihan Ganda":"Esai"]}),e.jsxs("form",{onSubmit:X,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pertanyaan"}),e.jsx("textarea",{className:"w-full border rounded-md p-2 text-sm focus:ring-blue-500 focus:border-blue-500",rows:"3",value:n.question,onChange:s=>h({...n,question:s.target.value}),required:!0})]}),n.type==="multiple_choice"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Opsi Jawaban & Kunci"}),n.options.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"answer_key",checked:n.answer_key===s&&s!=="",onChange:()=>h({...n,answer_key:s}),disabled:!s,className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),e.jsxs("span",{className:"w-6 text-sm font-bold text-gray-500",children:[String.fromCharCode(65+t),"."]}),e.jsx("input",{type:"text",className:"flex-1 border rounded-md p-1.5 text-sm",placeholder:`Opsi ${String.fromCharCode(65+t)}`,value:s,onChange:i=>{const m=[...n.options];m[t]=i.target.value,h({...n,options:m})},required:!0})]},t)),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"* Pilih radio button di sebelah kiri untuk menandai kunci jawaban benar."})]}),e.jsxs("div",{className:"flex justify-end pt-4 gap-2",children:[e.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 border rounded-md text-sm hover:bg-gray-50",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700",children:"Simpan Soal"})]})]})]})]}),e.jsx(ne,{isOpen:H,onCancel:()=>f(!1),title:"Hapus Soal",message:"Apakah Anda yakin ingin menghapus soal ini? Tindakan ini tidak dapat dibatalkan.",confirmText:"Hapus",onConfirm:W}),G&&e.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>w(!1)}),e.jsxs("div",{className:"relative w-full max-w-md bg-white shadow-lg h-full overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Pilih Peserta untuk Generate Link"}),e.jsxs("button",{type:"button",className:"text-gray-400 hover:text-gray-500",onClick:()=>w(!1),children:[e.jsx("span",{className:"sr-only",children:"Tutup"}),e.jsx(le,{className:"w-6 h-6"})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cari & Pilih Peserta"}),e.jsx(be,{value:g,onChange:P,children:e.jsxs("div",{className:"relative mt-1",children:[e.jsxs("div",{className:"relative w-full cursor-default overflow-hidden rounded-md border border-gray-300 bg-white text-left shadow-sm focus-within:ring-1 focus-within:ring-blue-500 focus-within:border-blue-500 sm:text-sm",children:[e.jsx(ye,{className:"w-full border-none py-2 pl-3 pr-10 text-sm leading-5 text-gray-900 focus:ring-0",displayValue:s=>s?`${s.applicant_name} (${s.applicant_email})`:"",onChange:s=>F(s.target.value),placeholder:"Ketik nama atau email..."}),e.jsx(fe,{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:e.jsx(pe,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),e.jsx(je,{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:B.length===0&&b!==""?e.jsx("div",{className:"relative cursor-default select-none py-2 px-4 text-gray-700",children:"Tidak ada peserta ditemukan."}):B.map(s=>e.jsx(Ne,{className:({active:t})=>a(t?"text-white bg-blue-600":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"),value:s,children:({selected:t,active:i})=>e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:a(t?"font-semibold":"font-normal","block truncate"),children:[s.applicant_name," (",s.job_title,")"]}),t?e.jsx("span",{className:a(i?"text-white":"text-blue-600","absolute inset-y-0 right-0 flex items-center pr-4"),children:e.jsx(ge,{className:"h-5 w-5","aria-hidden":"true"})}):null]})},s.id))})]})})]}),v&&e.jsxs("div",{className:"mb-4 bg-blue-50 border border-blue-200 rounded-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 truncate mr-4",children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Link Psikotes:"}),e.jsx("p",{className:"text-sm text-blue-600 truncate",children:v})]}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText(v),className:"flex-shrink-0 p-1 text-blue-600 hover:bg-blue-100 rounded-full",title:"Salin Link",children:e.jsx(_e,{className:"h-4 w-4"})})]}),e.jsx("button",{className:"mt-4 w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:ee,children:"Generate Link"})]})]})]})]})]})};export{Oe as default};
