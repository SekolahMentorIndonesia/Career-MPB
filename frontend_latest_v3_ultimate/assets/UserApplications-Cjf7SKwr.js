import{r as o,j as e,B as b,F as j,C as w}from"./index-B5frEt5u.js";import{A as y}from"./award-IRQuEGaB.js";import{U as N}from"./user-BRxEefNs.js";const S=()=>{const[m,u]=o.useState([]),[g,x]=o.useState(!1);o.useEffect(()=>{h()},[]);const h=async()=>{x(!0);try{const r=await(await fetch(`${window.API_BASE_URL}/api/user/applications`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();r.success&&u(r.data)}catch(s){console.error("Error fetching applications:",s)}finally{x(!1)}},p=s=>{const{status:r,stages:t}=s,l=[{step:"Administrasi",icon:e.jsx(j,{className:"w-5 h-5"}),label:"Seleksi Berkas"},{step:"Psikotes",icon:e.jsx(y,{className:"w-5 h-5"}),label:"Tes Kompetensi"},{step:"Interview",icon:e.jsx(N,{className:"w-5 h-5"}),label:"Wawancara"},{step:"Final",icon:e.jsx(w,{className:"w-5 h-5"}),label:"Keputusan"}];return!t||t.length===0?l.map(a=>({...a,status:"pending"})):l.map(a=>{const n=t.find(c=>c.name===a.step);let i="pending";return n&&(n.status==="passed"?i="completed":n.status==="rejected"?i="rejected":n.status==="locked"?i="pending":n.status==="pending"&&(r===a.step||a.step==="Administrasi"&&r==="Seleksi Administrasi"?i="in_progress":i="pending")),{...a,status:i}})},f=s=>{switch(s){case"completed":return e.jsx("span",{className:"px-3 py-1 text-xs font-bold text-green-700 bg-green-100 rounded-lg",children:"Berhasil"});case"in_progress":return e.jsx("span",{className:"px-3 py-1 text-xs font-bold text-blue-700 bg-blue-100 rounded-lg animate-pulse",children:"Sedang Proses"});case"rejected":return e.jsx("span",{className:"px-3 py-1 text-xs font-bold text-red-700 bg-red-100 rounded-lg",children:"Gagal"});default:return e.jsx("span",{className:"px-3 py-1 text-xs font-bold text-gray-400 bg-gray-50 rounded-lg",children:"Menunggu"})}},d=s=>{if(s.status!=="Ditolak"||!s.rejected_at)return null;const r=new Date(s.rejected_at),l=new Date-r,a=1440*60*1e3;if(l>=a)return{canApply:!0,label:"Dapat Melamar Kembali"};const n=a-l,i=Math.floor(n/(1e3*60*60)),c=Math.floor(n%(1e3*60*60)/(1e3*60));return{canApply:!1,label:`Dapat melamar lagi dalam ${i} jam ${c} menit`}};return e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 mb-2",children:"Lamaran Saya"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Pantau status pendaftaran Anda secara real-time."}),g?e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm p-20 flex flex-col items-center justify-center border border-gray-100",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-100 border-t-blue-600 rounded-full animate-spin mb-6"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Menyesuaikan status lamaran..."})]}):m.length===0?e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm p-16 flex flex-col items-center justify-center text-center border border-gray-100",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-50 rounded-full flex items-center justify-center mb-6",children:e.jsx(b,{className:"h-10 w-10 text-gray-300"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Belum Ada Lamaran"}),e.jsx("p",{className:"text-gray-500 max-w-sm mx-auto",children:"Anda belum melamar posisi apapun. Mulai karir Anda bersama kami sekarang!"})]}):e.jsx("div",{className:"space-y-6",children:m.map(s=>e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-all",children:[e.jsxs("div",{className:"p-6 md:p-8 border-b border-gray-50 bg-gray-50/50 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s.job_title}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"MPB Corps"}),e.jsx("span",{className:"w-1 h-1 bg-gray-300 rounded-full"}),e.jsx("span",{className:"text-[10px] font-bold text-blue-600 uppercase tracking-widest",children:s.status})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-tighter",children:"Dilamar Pada"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(s.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})})]})]}),e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:p(s).map((t,l)=>e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"flex items-center gap-4 md:flex-col md:items-center md:text-center",children:[e.jsx("div",{className:`
                              w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-500 z-10
                              ${t.status==="completed"?"bg-green-500 text-white shadow-lg shadow-green-100":t.status==="in_progress"?"bg-blue-600 text-white shadow-lg shadow-blue-200 animate-pulse":t.status==="rejected"?"bg-red-500 text-white shadow-lg shadow-red-100":"bg-gray-100 text-gray-400"}
                            `,children:t.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`text-sm font-bold ${t.status==="pending"?"text-gray-400":"text-gray-900"}`,children:t.step}),e.jsx("p",{className:"text-[10px] text-gray-500 font-medium",children:t.label}),e.jsx("div",{className:"mt-2 md:hidden",children:f(t.status)})]})]}),l<3&&e.jsx("div",{className:"hidden md:block absolute top-6 left-[60%] w-[80%] h-0.5 bg-gray-100 -z-0",children:e.jsx("div",{className:`h-full transition-all duration-1000 ${t.status==="completed"?"bg-green-500 w-full":"w-0"}`})})]},l))}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-50 hidden md:flex justify-between items-center text-[10px] font-bold uppercase tracking-widest text-gray-400",children:[e.jsx("span",{children:"Tahapan Rekrutmen"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{children:["Status: ",e.jsx("span",{className:s.status==="Ditolak"?"text-red-500":"text-blue-600",children:s.status})]}),s.status==="Ditolak"&&d(s)&&!d(s).canApply&&e.jsx("p",{className:"text-xs text-red-500 normal-case mt-1 font-semibold",children:d(s).label})]})]})]})]},s.id))})]})})};export{S as default};
