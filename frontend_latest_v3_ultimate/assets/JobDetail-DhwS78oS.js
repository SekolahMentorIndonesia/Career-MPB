import{f,d as g,a as j,r as n,j as e,e as w,L as i,M as N}from"./index-B5frEt5u.js";import{A as y}from"./arrow-left-C7SiSgCo.js";import{B as k}from"./building-2-Cyzyo7md.js";import{C as v}from"./clock-CxqBU5kU.js";const P=()=>{const{slug:l}=f(),{showNotification:o}=g(),{user:d}=j(),[a,x]=n.useState(null),[u,c]=n.useState(!0);n.useEffect(()=>{p()},[l]);const p=async()=>{c(!0);try{const r=await(await fetch(`${window.API_BASE_URL}/api/jobs/${l}`)).json();r.success?x(r.data):o("error","Gagal",r.message||"Gagal memuat detail lowongan")}catch(t){console.error("Error fetching job detail:",t),o("error","Kesalahan","Terjadi kesalahan koneksi ke server")}finally{c(!1)}},s=t=>{if(!t?.registration_start_date||!t?.registration_end_date)return!0;const r=new Date,b=new Date(t.registration_start_date),m=new Date(t.registration_end_date);return m.setHours(23,59,59),r>=b&&r<=m},h=t=>t?new Date(t).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"-";return u?e.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center",children:[e.jsx(w,{className:"w-12 h-12 text-blue-600 animate-spin mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Memuat detail lowongan..."})]}):a?e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs(i,{to:"/",className:"inline-flex items-center text-gray-500 hover:text-blue-600 mb-8 transition-colors",children:[e.jsx(y,{className:"w-4 h-4 mr-2"})," Kembali ke Beranda"]}),e.jsxs("div",{className:"bg-white rounded-2xl border shadow-sm p-8",children:[e.jsxs("div",{className:"border-b pb-8 mb-8",children:[e.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full bg-blue-50 text-blue-700 text-xs font-bold uppercase tracking-wider mb-4",children:a.type}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:a.title}),e.jsxs("div",{className:"flex flex-wrap gap-6 text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5"})," ",a.location]}),e.jsxs("span",{className:"flex items-center gap-2 font-bold text-blue-600",children:[e.jsx(k,{className:"w-5 h-5"})," ",a.company]}),a.registration_end_date&&e.jsxs("span",{className:`flex items-center gap-2 font-medium ${s(a)?"text-emerald-600":"text-red-600"}`,children:[e.jsx(v,{className:"w-5 h-5"}),s(a)?`Dibuka sampai ${h(a.registration_end_date)}`:"Pendaftaran Ditutup"]})]})]}),e.jsxs("div",{className:"prose max-w-none text-gray-600 mb-10",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Deskripsi Pekerjaan"}),e.jsx("div",{className:"whitespace-pre-line leading-relaxed",children:a.description})]}),e.jsx("div",{className:"flex justify-end pt-6 border-t items-center gap-4",children:d?.role==="admin"?e.jsx("div",{className:"text-center w-full py-4",children:e.jsx("p",{className:"text-gray-600 font-medium",children:e.jsx("span",{className:"inline-block px-4 py-2 bg-blue-50 text-blue-700 rounded-lg border border-blue-200",children:"ðŸ‘” Anda adalah Admin/HR. Anda tidak dapat melamar pekerjaan karena Anda yang membuka lowongan ini."})})}):e.jsxs(e.Fragment,{children:[!s(a)&&e.jsx("span",{className:"text-red-500 font-medium",children:"Masa pendaftaran telah berakhir."}),e.jsx(i,{to:s(a)?`/apply/${a.id}`:"#",className:`px-8 py-4 font-bold rounded-lg transition-colors shadow-lg ${s(a)?"bg-blue-600 text-white hover:bg-blue-700 shadow-blue-200":"bg-gray-200 text-gray-400 cursor-not-allowed shadow-none pointer-events-none"}`,children:s(a)?d?"Lamar Sekarang":"Login untuk Melamar":"Pendaftaran Tutup"})]})})]})]}):e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-12 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Lowongan tidak ditemukan"}),e.jsx(i,{to:"/",className:"text-blue-600 hover:underline",children:"Kembali ke Beranda"})]})};export{P as default};
