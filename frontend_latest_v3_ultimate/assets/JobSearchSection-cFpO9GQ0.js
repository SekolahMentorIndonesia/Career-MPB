import{c as L,r,A as S,d as _,j as t,M as f,n as w,e as C,h as k,L as y,B as D}from"./index-B5frEt5u.js";import{S as A}from"./search-BhyPs1tm.js";import{C as F}from"./clock-CxqBU5kU.js";import{A as J}from"./arrow-right-BIe5Uh-o.js";const T=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],$=L("funnel",T),R=()=>{const{user:x}=r.useContext(S),{showNotification:M}=_(),[o,u]=r.useState(""),[i,m]=r.useState(""),[c,p]=r.useState(""),[d,N]=r.useState([]),[v,g]=r.useState(!1);r.useEffect(()=>{j()},[]);const j=async()=>{g(!0);try{const a=await(await fetch(`${window.API_BASE_URL}/api/jobs`)).json();a.success&&N(a.data)}catch(e){console.error("Error fetching jobs:",e)}finally{g(!1)}},n=e=>{if(!e.registration_start_date||!e.registration_end_date)return!0;const a=new Date,l=new Date(e.registration_start_date),s=new Date(e.registration_end_date);return s.setHours(23,59,59),a>=l&&a<=s},h=e=>{if(!e.registration_start_date||!e.registration_end_date)return{label:"Dibuka",color:"bg-emerald-100 text-emerald-700"};const a=new Date,l=new Date(e.registration_start_date),s=new Date(e.registration_end_date);return s.setHours(23,59,59),a<l?{label:`Dibuka ${l.toLocaleDateString("id-ID",{day:"numeric",month:"short"})}`,color:"bg-yellow-100 text-yellow-700 border-yellow-200"}:a>s?{label:"Tutup",color:"bg-red-100 text-red-700 border-red-200"}:{label:`Sisa ${Math.ceil((s-a)/(1e3*60*60*24))} Hari`,color:"bg-emerald-100 text-emerald-700 border-emerald-200"}},b=d.filter(e=>{const a=e.title.toLowerCase().includes(o.toLowerCase())||e.company.toLowerCase().includes(o.toLowerCase()),l=i?e.location.includes(i):!0,s=c?e.type===c:!0;return a&&l&&s});return t.jsx("div",{className:"w-full",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-5 border border-gray-100",children:[t.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mb-6",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:"Cari posisi pekerjaan...",className:"w-full pl-9 pr-4 py-2 text-sm border rounded-lg focus:ring-1 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",value:o,onChange:e=>u(e.target.value)})]}),t.jsxs("div",{className:"relative md:w-44",children:[t.jsx(f,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-3.5 h-3.5"}),t.jsxs("select",{className:"w-full pl-8 pr-8 py-2 text-sm border rounded-lg appearance-none bg-white focus:ring-1 focus:ring-blue-500 outline-none cursor-pointer",value:i,onChange:e=>m(e.target.value),children:[t.jsx("option",{value:"",children:"Semua Lokasi"}),[...new Set(d.map(e=>e.location.trim().toLowerCase().replace(/\b\w/g,a=>a.toUpperCase())))].sort().map(e=>t.jsx("option",{value:e,children:e},e))]}),t.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:t.jsx(w,{className:"w-3.5 h-3.5 text-gray-400"})})]}),t.jsxs("div",{className:"relative md:w-44",children:[t.jsx($,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-3.5 h-3.5"}),t.jsxs("select",{className:"w-full pl-8 pr-8 py-2 text-sm border rounded-lg appearance-none bg-white focus:ring-1 focus:ring-blue-500 outline-none cursor-pointer",value:c,onChange:e=>p(e.target.value),children:[t.jsx("option",{value:"",children:"Semua Tipe"}),[...new Set(d.map(e=>e.type.trim()))].sort().map(e=>t.jsx("option",{value:e,children:e},e))]}),t.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:t.jsx(w,{className:"w-3.5 h-3.5 text-gray-400"})})]})]}),v?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(C,{className:"w-8 h-8 text-blue-600 animate-spin mx-auto mb-2"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Memuat lowongan..."})]}):b.length>0?t.jsx("div",{className:"space-y-3",children:b.map(e=>t.jsxs("div",{className:"bg-white border border-gray-100 rounded-xl p-4 hover:border-blue-100 transition-all flex flex-col md:flex-row md:items-center justify-between gap-4 group",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[t.jsx("span",{className:k("px-2 py-0.5 rounded-md text-[9px] font-bold uppercase tracking-wider",e.type==="Full-time"?"bg-blue-50 text-blue-600":e.type==="Part-time"?"bg-purple-50 text-purple-600":"bg-orange-50 text-orange-600"),children:e.type}),t.jsx("span",{className:`px-2 py-0.5 rounded-md text-[9px] font-bold uppercase tracking-wider border ${h(e).color}`,children:h(e).label})]}),t.jsx("h3",{className:"text-base font-bold text-gray-900 group-hover:text-blue-600 transition-colors mb-1",children:e.title}),t.jsxs("div",{className:"flex flex-wrap items-center gap-y-1 gap-x-4 text-xs text-gray-500",children:[t.jsxs("div",{className:"flex items-center gap-1.5 font-medium",children:[t.jsx(f,{className:"w-3.5 h-3.5 text-gray-400"}),e.location]}),t.jsxs("div",{className:"flex items-center gap-1.5 font-medium",children:[t.jsx(F,{className:"w-3.5 h-3.5 text-gray-400"}),e.type]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 pt-3 md:pt-0 border-t md:border-t-0 border-gray-50",children:[t.jsx(y,{to:`/jobs/${e.id}/details`,className:"inline-flex items-center justify-center px-4 py-1.5 text-xs font-bold text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-all",children:"Detail"}),x?.role!=="admin"&&t.jsxs(y,{to:n(e)?`/apply/${e.id}`:"#",className:`inline-flex justify-center items-center px-5 py-1.5 text-xs font-bold rounded-lg transition-all ${n(e)?"bg-blue-600 text-white hover:bg-blue-700 shadow-sm":"bg-gray-100 text-gray-400 cursor-not-allowed pointer-events-none"}`,children:[n(e)?x?"Lamar Sekarang":"Login untuk Melamar":"Pendaftaran Tutup",n(e)&&t.jsx(J,{className:"ml-1.5 w-3.5 h-3.5"})]})]})]},e.id))}):t.jsxs("div",{className:"bg-gray-50 border-2 border-dashed border-gray-200 rounded-lg p-8 text-center",children:[t.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center mx-auto mb-3 shadow-sm",children:t.jsx(D,{className:"w-6 h-6 text-gray-300"})}),t.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-1",children:"Lowongan tidak ditemukan."}),t.jsx("p",{className:"text-xs text-gray-500 max-w-xs mx-auto mb-4",children:"Coba gunakan filter lain atau cari dengan kata kunci berbeda."}),t.jsx("button",{onClick:()=>{u(""),m(""),p("")},className:"text-blue-600 hover:text-blue-700 text-xs font-bold border-b border-blue-600 pb-0.5",children:"Reset Filter"})]})]})})};export{R as J};
