import{d as ke,l as Se,b as Ke,i as qe,E as Ge,T as Xe,x as ze,k as Ye,p as Je,c as ue,e as A,f as Oe,g as Qe,G as Ze,h as et,Z as tt,j as nt,m as ot,n as st,u as it,S as k,o as lt,q as de,V as rt,A as at,r as ut,L as ct,s as ae,t as dt,v as j,w as pt,N as be,$ as De,y as _e,z as ht,B as ft,D as mt,F as vt,H as gt,I as bt,R as xt,J as Et,K as Ce,M as St,O as Ot,P as Ct,Q as ye,U as Ie,W as yt,X as It,Y as wt,_ as Mt,a0 as Tt}from"./element-movement-B5hWxci9.js";import{r as m,p as te,R as V}from"./index-B5frEt5u.js";import{s as Le,o as R,n as Y,u as se,Y as pe,K as he,c as $t,i as me,A as we,y as ve,V as xe,p as Rt,a as Pt,N as Ft,x as At,b as kt}from"./open-closed-BNHp7105.js";function oe(t,s,e){let o=e.initialDeps??[],n,i=!0;function l(){var r,u,a;let c;e.key&&((r=e.debug)!=null&&r.call(e))&&(c=Date.now());const b=t();if(!(b.length!==o.length||b.some((p,v)=>o[v]!==p)))return n;o=b;let h;if(e.key&&((u=e.debug)!=null&&u.call(e))&&(h=Date.now()),n=s(...b),e.key&&((a=e.debug)!=null&&a.call(e))){const p=Math.round((Date.now()-c)*100)/100,v=Math.round((Date.now()-h)*100)/100,x=v/16,M=(T,$)=>{for(T=String(T);T.length<$;)T=" "+T;return T};console.info(`%câ± ${M(v,5)} /${M(p,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*x,120))}deg 100% 31%);`,e?.key)}return e?.onChange&&!(i&&e.skipInitialOnChange)&&e.onChange(n),i=!1,n}return l.updateDeps=r=>{o=r},l}function Me(t,s){if(t===void 0)throw new Error("Unexpected undefined");return t}const zt=(t,s)=>Math.abs(t-s)<1.01,Dt=(t,s,e)=>{let o;return function(...n){t.clearTimeout(o),o=t.setTimeout(()=>s.apply(this,n),e)}},Te=t=>{const{offsetWidth:s,offsetHeight:e}=t;return{width:s,height:e}},_t=t=>t,Lt=t=>{const s=Math.max(t.startIndex-t.overscan,0),e=Math.min(t.endIndex+t.overscan,t.count-1),o=[];for(let n=s;n<=e;n++)o.push(n);return o},Vt=(t,s)=>{const e=t.scrollElement;if(!e)return;const o=t.targetWindow;if(!o)return;const n=l=>{const{width:r,height:u}=l;s({width:Math.round(r),height:Math.round(u)})};if(n(Te(e)),!o.ResizeObserver)return()=>{};const i=new o.ResizeObserver(l=>{const r=()=>{const u=l[0];if(u?.borderBoxSize){const a=u.borderBoxSize[0];if(a){n({width:a.inlineSize,height:a.blockSize});return}}n(Te(e))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(r):r()});return i.observe(e,{box:"border-box"}),()=>{i.unobserve(e)}},$e={passive:!0},Re=typeof window>"u"?!0:"onscrollend"in window,Wt=(t,s)=>{const e=t.scrollElement;if(!e)return;const o=t.targetWindow;if(!o)return;let n=0;const i=t.options.useScrollendEvent&&Re?()=>{}:Dt(o,()=>{s(n,!1)},t.options.isScrollingResetDelay),l=c=>()=>{const{horizontal:b,isRtl:d}=t.options;n=b?e.scrollLeft*(d&&-1||1):e.scrollTop,i(),s(n,c)},r=l(!0),u=l(!1);e.addEventListener("scroll",r,$e);const a=t.options.useScrollendEvent&&Re;return a&&e.addEventListener("scrollend",u,$e),()=>{e.removeEventListener("scroll",r),a&&e.removeEventListener("scrollend",u)}},Nt=(t,s,e)=>{if(s?.borderBoxSize){const o=s.borderBoxSize[0];if(o)return Math.round(o[e.options.horizontal?"inlineSize":"blockSize"])}return t[e.options.horizontal?"offsetWidth":"offsetHeight"]},Bt=(t,{adjustments:s=0,behavior:e},o)=>{var n,i;const l=t+s;(i=(n=o.scrollElement)==null?void 0:n.scrollTo)==null||i.call(n,{[o.options.horizontal?"left":"top"]:l,behavior:e})};class jt{constructor(s){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.currentScrollToIndex=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const o=()=>e||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:e=new this.targetWindow.ResizeObserver(n=>{n.forEach(i=>{const l=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()})}));return{disconnect:()=>{var n;(n=o())==null||n.disconnect(),e=null},observe:n=>{var i;return(i=o())==null?void 0:i.observe(n,{box:"border-box"})},unobserve:n=>{var i;return(i=o())==null?void 0:i.unobserve(n)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([o,n])=>{typeof n>"u"&&delete e[o]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:_t,rangeExtractor:Lt,onChange:()=>{},measureElement:Nt,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var o,n;(n=(o=this.options).onChange)==null||n.call(o,this,e)},this.maybeNotify=oe(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const o=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==o){if(this.cleanup(),!o){this.maybeNotify();return}this.scrollElement=o,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((e=this.scrollElement)==null?void 0:e.window)??null,this.elementsCache.forEach(n=>{this.observer.observe(n)}),this.unsubs.push(this.options.observeElementRect(this,n=>{this.scrollRect=n,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(n,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<n?"forward":"backward":null,this.scrollOffset=n,this.isScrolling=i,this.maybeNotify()})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0})}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,o)=>{const n=new Map,i=new Map;for(let l=o-1;l>=0;l--){const r=e[l];if(n.has(r.lane))continue;const u=i.get(r.lane);if(u==null||r.end>u.end?i.set(r.lane,r):r.end<u.end&&n.set(r.lane,!0),n.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((l,r)=>l.end===r.end?l.index-r.index:l.end-r.end)[0]:void 0},this.getMeasurementOptions=oe(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(e,o,n,i,l,r)=>(this.prevLanes!==void 0&&this.prevLanes!==r&&(this.lanesChangedFlag=!0),this.prevLanes=r,this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:o,scrollMargin:n,getItemKey:i,enabled:l,lanes:r}),{key:!1}),this.getMeasurements=oe(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:o,scrollMargin:n,getItemKey:i,enabled:l,lanes:r},u)=>{if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>e)for(const d of this.laneAssignments.keys())d>=e&&this.laneAssignments.delete(d);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&!this.lanesSettling&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const a=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===e&&(this.lanesSettling=!1);const c=this.measurementsCache.slice(0,a),b=new Array(r).fill(void 0);for(let d=0;d<a;d++){const h=c[d];h&&(b[h.lane]=d)}for(let d=a;d<e;d++){const h=i(d),p=this.laneAssignments.get(d);let v,x;if(p!==void 0&&this.options.lanes>1){v=p;const O=b[v],z=O!==void 0?c[O]:void 0;x=z?z.end+this.options.gap:o+n}else{const O=this.options.lanes===1?c[d-1]:this.getFurthestMeasurement(c,d);x=O?O.end+this.options.gap:o+n,v=O?O.lane:d%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(d,v)}const M=u.get(h),T=typeof M=="number"?M:this.options.estimateSize(d),$=x+T;c[d]={index:d,start:x,size:T,end:$,key:h,lane:v},b[v]=d}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=oe(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(e,o,n,i)=>this.range=e.length>0&&o>0?Ut({measurements:e,outerSize:o,scrollOffset:n,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=oe(()=>{let e=null,o=null;const n=this.calculateRange();return n&&(e=n.startIndex,o=n.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,o]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,o]},(e,o,n,i,l)=>i===null||l===null?[]:e({startIndex:i,endIndex:l,overscan:o,count:n}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const o=this.options.indexAttribute,n=e.getAttribute(o);return n?parseInt(n,10):(console.warn(`Missing attribute name '${o}={index}' on measured element.`),-1)},this._measureElement=(e,o)=>{const n=this.indexFromElement(e),i=this.measurementsCache[n];if(!i)return;const l=i.key,r=this.elementsCache.get(l);r!==e&&(r&&this.observer.unobserve(r),this.observer.observe(e),this.elementsCache.set(l,e)),e.isConnected&&this.resizeItem(n,this.options.measureElement(e,o,this))},this.resizeItem=(e,o)=>{const n=this.measurementsCache[e];if(!n)return;const i=this.itemSizeCache.get(n.key)??n.size,l=o-i;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,l,this):n.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,o)),this.notify(!1))},this.measureElement=e=>{if(!e){this.elementsCache.forEach((o,n)=>{o.isConnected||(this.observer.unobserve(o),this.elementsCache.delete(n))});return}this._measureElement(e,void 0)},this.getVirtualItems=oe(()=>[this.getVirtualIndexes(),this.getMeasurements()],(e,o)=>{const n=[];for(let i=0,l=e.length;i<l;i++){const r=e[i],u=o[r];n.push(u)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const o=this.getMeasurements();if(o.length!==0)return Me(o[Ve(0,o.length-1,n=>Me(o[n]).start,e)])},this.getMaxScrollOffset=()=>{if(!this.scrollElement)return 0;if("scrollHeight"in this.scrollElement)return this.options.horizontal?this.scrollElement.scrollWidth-this.scrollElement.clientWidth:this.scrollElement.scrollHeight-this.scrollElement.clientHeight;{const e=this.scrollElement.document.documentElement;return this.options.horizontal?e.scrollWidth-this.scrollElement.innerWidth:e.scrollHeight-this.scrollElement.innerHeight}},this.getOffsetForAlignment=(e,o,n=0)=>{if(!this.scrollElement)return 0;const i=this.getSize(),l=this.getScrollOffset();o==="auto"&&(o=e>=l+i?"end":"start"),o==="center"?e+=(n-i)/2:o==="end"&&(e-=i);const r=this.getMaxScrollOffset();return Math.max(Math.min(r,e),0)},this.getOffsetForIndex=(e,o="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const n=this.measurementsCache[e];if(!n)return;const i=this.getSize(),l=this.getScrollOffset();if(o==="auto")if(n.end>=l+i-this.options.scrollPaddingEnd)o="end";else if(n.start<=l+this.options.scrollPaddingStart)o="start";else return[l,o];if(o==="end"&&e===this.options.count-1)return[this.getMaxScrollOffset(),o];const r=o==="end"?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(r,o,n.size),o]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(e,{align:o="start",behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,o),{adjustments:void 0,behavior:n})},this.scrollToIndex=(e,{align:o="auto",behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e=Math.max(0,Math.min(e,this.options.count-1)),this.currentScrollToIndex=e;let i=0;const l=10,r=a=>{if(!this.targetWindow)return;const c=this.getOffsetForIndex(e,a);if(!c){console.warn("Failed to get offset for index:",e);return}const[b,d]=c;this._scrollToOffset(b,{adjustments:void 0,behavior:n}),this.targetWindow.requestAnimationFrame(()=>{const h=()=>{if(this.currentScrollToIndex!==e)return;const p=this.getScrollOffset(),v=this.getOffsetForIndex(e,d);if(!v){console.warn("Failed to get offset for index:",e);return}zt(v[0],p)||u(d)};this.isDynamicMode()?this.targetWindow.requestAnimationFrame(h):h()})},u=a=>{this.targetWindow&&this.currentScrollToIndex===e&&(i++,i<l?this.targetWindow.requestAnimationFrame(()=>r(a)):console.warn(`Failed to scroll to index ${e} after ${l} attempts.`))};r(o)},this.scrollBy=(e,{behavior:o}={})=>{o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:o})},this.getTotalSize=()=>{var e;const o=this.getMeasurements();let n;if(o.length===0)n=this.options.paddingStart;else if(this.options.lanes===1)n=((e=o[o.length-1])==null?void 0:e.end)??0;else{const i=Array(this.options.lanes).fill(null);let l=o.length-1;for(;l>=0&&i.some(r=>r===null);){const r=o[l];i[r.lane]===null&&(i[r.lane]=r.end),l--}n=Math.max(...i.filter(r=>r!==null))}return Math.max(n-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:o,behavior:n})=>{this.options.scrollToFn(e,{behavior:n,adjustments:o},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(s)}}const Ve=(t,s,e,o)=>{for(;t<=s;){const n=(t+s)/2|0,i=e(n);if(i<o)t=n+1;else if(i>o)s=n-1;else return n}return t>0?t-1:0};function Ut({measurements:t,outerSize:s,scrollOffset:e,lanes:o}){const n=t.length-1,i=u=>t[u].start;if(t.length<=o)return{startIndex:0,endIndex:n};let l=Ve(0,n,i,e),r=l;if(o===1)for(;r<n&&t[r].end<e+s;)r++;else if(o>1){const u=Array(o).fill(0);for(;r<n&&u.some(c=>c<e+s);){const c=t[r];u[c.lane]=c.end,r++}const a=Array(o).fill(e+s);for(;l>=0&&a.some(c=>c>=e);){const c=t[l];a[c.lane]=c.start,l--}l=Math.max(0,l-l%o),r=Math.min(n,r+(o-1-r%o))}return{startIndex:l,endIndex:r}}const Pe=typeof document<"u"?m.useLayoutEffect:m.useEffect;function Ht({useFlushSync:t=!0,...s}){const e=m.useReducer(()=>({}),{})[1],o={...s,onChange:(i,l)=>{var r;t&&l?te.flushSync(e):e(),(r=s.onChange)==null||r.call(s,i,l)}},[n]=m.useState(()=>new jt(o));return n.setOptions(o),Pe(()=>n._didMount(),[]),Pe(()=>n._willUpdate()),n}function Kt(t){return Ht({observeElementRect:Vt,observeElementOffset:Wt,scrollToFn:Bt,...t})}function qt(t,s,e,o){let n=Le(e);m.useEffect(()=>{t=t??window;function i(l){n.current(l)}return t.addEventListener(s,i,o),()=>t.removeEventListener(s,i,o)},[t,s,o])}function We(t){let s=m.useRef({value:"",selectionStart:null,selectionEnd:null});return qt(t,"blur",e=>{let o=e.target;Se(o)&&(s.current={value:o.value,selectionStart:o.selectionStart,selectionEnd:o.selectionEnd})}),R(()=>{if(!ke(t)&&Se(t)&&t.isConnected){if(t.focus({preventScroll:!0}),t.value!==s.current.value)t.setSelectionRange(t.value.length,t.value.length);else{let{selectionStart:e,selectionEnd:o}=s.current;e!==null&&o!==null&&t.setSelectionRange(e,o)}s.current={value:"",selectionStart:null,selectionEnd:null}}})}function Gt(t,{container:s,accept:e,walk:o}){let n=m.useRef(e),i=m.useRef(o);m.useEffect(()=>{n.current=e,i.current=o},[e,o]),Y(()=>{if(!s||!t)return;let l=Ke(s);if(!l)return;let r=n.current,u=i.current,a=Object.assign(b=>r(b),{acceptNode:r}),c=l.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,a,!1);for(;c.nextNode();)u(c.currentNode)},[s,t,n,i])}function Fe(t,s){let e=m.useRef([]),o=R(t);m.useEffect(()=>{let n=[...e.current];for(let[i,l]of s.entries())if(e.current[i]!==l){let r=o(s,n);return e.current=s,r}},[o,...s])}function Xt(t){function s(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",s))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",s),s())}let ee=[];Xt(()=>{function t(s){if(!qe(s.target)||s.target===document.body||ee[0]===s.target)return;let e=s.target;e=e.closest(Ge),ee.unshift(e??s.target),ee=ee.filter(o=>o!=null&&o.isConnected),ee.splice(10)}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});var Yt=Object.defineProperty,Jt=(t,s,e)=>s in t?Yt(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,Ae=(t,s,e)=>(Jt(t,typeof s!="symbol"?s+"":s,e),e),g=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(g||{}),H=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(H||{}),X=(t=>(t[t.Pointer=0]="Pointer",t[t.Focus=1]="Focus",t[t.Other=2]="Other",t))(X||{}),Ne=(t=>(t[t.OpenCombobox=0]="OpenCombobox",t[t.CloseCombobox=1]="CloseCombobox",t[t.GoToOption=2]="GoToOption",t[t.SetTyping=3]="SetTyping",t[t.RegisterOption=4]="RegisterOption",t[t.UnregisterOption=5]="UnregisterOption",t[t.DefaultToFirstOption=6]="DefaultToFirstOption",t[t.SetActivationTrigger=7]="SetActivationTrigger",t[t.UpdateVirtualConfiguration=8]="UpdateVirtualConfiguration",t[t.SetInputElement=9]="SetInputElement",t[t.SetButtonElement=10]="SetButtonElement",t[t.SetOptionsElement=11]="SetOptionsElement",t[t.MarkInputAsMoved=12]="MarkInputAsMoved",t))(Ne||{});function ge(t,s=e=>e){let e=t.activeOptionIndex!==null?t.options[t.activeOptionIndex]:null,o=s(t.options.slice()),n=o.length>0&&o[0].dataRef.current.order!==null?o.sort((l,r)=>l.dataRef.current.order-r.dataRef.current.order):Ze(o,l=>l.dataRef.current.domRef.current),i=e?n.indexOf(e):null;return i===-1&&(i=null),{options:n,activeOptionIndex:i}}let Qt={1(t){var s;if((s=t.dataRef.current)!=null&&s.disabled||t.comboboxState===1)return t;let e=t.inputElement?ue.Tracked(Qe(t.inputElement)):t.inputPositionState;return{...t,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,inputPositionState:e,__demoMode:!1}},0(t){var s,e;if((s=t.dataRef.current)!=null&&s.disabled||t.comboboxState===0)return t;if((e=t.dataRef.current)!=null&&e.value){let o=t.dataRef.current.calculateIndex(t.dataRef.current.value);if(o!==-1)return{...t,activeOptionIndex:o,comboboxState:0,__demoMode:!1,inputPositionState:ue.Idle}}return{...t,comboboxState:0,inputPositionState:ue.Idle,__demoMode:!1}},3(t,s){return t.isTyping===s.isTyping?t:{...t,isTyping:s.isTyping}},2(t,s){var e,o,n,i;if((e=t.dataRef.current)!=null&&e.disabled||t.optionsElement&&!((o=t.dataRef.current)!=null&&o.optionsPropsRef.current.static)&&t.comboboxState===1)return t;if(t.virtual){let{options:a,disabled:c}=t.virtual,b=s.focus===A.Specific?s.idx:Oe(s,{resolveItems:()=>a,resolveActiveIndex:()=>{var h,p;return(p=(h=t.activeOptionIndex)!=null?h:a.findIndex(v=>!c(v)))!=null?p:null},resolveDisabled:c,resolveId(){throw new Error("Function not implemented.")}}),d=(n=s.trigger)!=null?n:2;return t.activeOptionIndex===b&&t.activationTrigger===d?t:{...t,activeOptionIndex:b,activationTrigger:d,isTyping:!1,__demoMode:!1}}let l=ge(t);if(l.activeOptionIndex===null){let a=l.options.findIndex(c=>!c.dataRef.current.disabled);a!==-1&&(l.activeOptionIndex=a)}let r=s.focus===A.Specific?s.idx:Oe(s,{resolveItems:()=>l.options,resolveActiveIndex:()=>l.activeOptionIndex,resolveId:a=>a.id,resolveDisabled:a=>a.dataRef.current.disabled}),u=(i=s.trigger)!=null?i:2;return t.activeOptionIndex===r&&t.activationTrigger===u?t:{...t,...l,isTyping:!1,activeOptionIndex:r,activationTrigger:u,__demoMode:!1}},4:(t,s)=>{var e,o,n,i;if((e=t.dataRef.current)!=null&&e.virtual)return{...t,options:[...t.options,s.payload]};let l=s.payload,r=ge(t,a=>(a.push(l),a));t.activeOptionIndex===null&&(n=(o=t.dataRef.current).isSelected)!=null&&n.call(o,s.payload.dataRef.current.value)&&(r.activeOptionIndex=r.options.indexOf(l));let u={...t,...r,activationTrigger:2};return(i=t.dataRef.current)!=null&&i.__demoMode&&t.dataRef.current.value===void 0&&(u.activeOptionIndex=0),u},5:(t,s)=>{var e;if((e=t.dataRef.current)!=null&&e.virtual)return{...t,options:t.options.filter(n=>n.id!==s.id)};let o=ge(t,n=>{let i=n.findIndex(l=>l.id===s.id);return i!==-1&&n.splice(i,1),n});return{...t,...o,activationTrigger:2}},6:(t,s)=>t.defaultToFirstOption===s.value?t:{...t,defaultToFirstOption:s.value},7:(t,s)=>t.activationTrigger===s.trigger?t:{...t,activationTrigger:s.trigger},8:(t,s)=>{var e,o;if(t.virtual===null)return{...t,virtual:{options:s.options,disabled:(e=s.disabled)!=null?e:()=>!1}};if(t.virtual.options===s.options&&t.virtual.disabled===s.disabled)return t;let n=t.activeOptionIndex;if(t.activeOptionIndex!==null){let i=s.options.indexOf(t.virtual.options[t.activeOptionIndex]);i!==-1?n=i:n=null}return{...t,activeOptionIndex:n,virtual:{options:s.options,disabled:(o=s.disabled)!=null?o:()=>!1}}},9:(t,s)=>t.inputElement===s.element?t:{...t,inputElement:s.element},10:(t,s)=>t.buttonElement===s.element?t:{...t,buttonElement:s.element},11:(t,s)=>t.optionsElement===s.element?t:{...t,optionsElement:s.element},12(t){return t.inputPositionState.kind!=="Tracked"?t:{...t,inputPositionState:ue.Moved}}};class Ee extends Xe{constructor(s){super(s),Ae(this,"actions",{onChange:e=>{let{onChange:o,compare:n,mode:i,value:l}=this.state.dataRef.current;return se(i,{0:()=>o?.(e),1:()=>{let r=l.slice(),u=r.findIndex(a=>n(a,e));return u===-1?r.push(e):r.splice(u,1),o?.(r)}})},registerOption:(e,o)=>(this.send({type:4,payload:{id:e,dataRef:o}}),()=>{this.state.activeOptionIndex===this.state.dataRef.current.calculateIndex(o.current.value)&&this.send({type:6,value:!0}),this.send({type:5,id:e})}),goToOption:(e,o)=>(this.send({type:6,value:!1}),this.send({type:2,...e,trigger:o})),setIsTyping:e=>{this.send({type:3,isTyping:e})},closeCombobox:()=>{var e,o;this.send({type:1}),this.send({type:6,value:!1}),(o=(e=this.state.dataRef.current).onClose)==null||o.call(e)},openCombobox:()=>{this.send({type:0}),this.send({type:6,value:!0})},setActivationTrigger:e=>{this.send({type:7,trigger:e})},selectActiveOption:()=>{let e=this.selectors.activeOptionIndex(this.state);if(e!==null){if(this.actions.setIsTyping(!1),this.state.virtual)this.actions.onChange(this.state.virtual.options[e]);else{let{dataRef:o}=this.state.options[e];this.actions.onChange(o.current.value)}this.actions.goToOption({focus:A.Specific,idx:e})}},setInputElement:e=>{this.send({type:9,element:e})},setButtonElement:e=>{this.send({type:10,element:e})},setOptionsElement:e=>{this.send({type:11,element:e})}}),Ae(this,"selectors",{activeDescendantId:e=>{var o,n;let i=this.selectors.activeOptionIndex(e);if(i!==null)return e.virtual?(n=e.options.find(l=>!l.dataRef.current.disabled&&e.dataRef.current.compare(l.dataRef.current.value,e.virtual.options[i])))==null?void 0:n.id:(o=e.options[i])==null?void 0:o.id},activeOptionIndex:e=>{if(e.defaultToFirstOption&&e.activeOptionIndex===null&&(e.virtual?e.virtual.options.length>0:e.options.length>0)){if(e.virtual){let{options:n,disabled:i}=e.virtual,l=n.findIndex(r=>{var u;return!((u=i?.(r))!=null&&u)});if(l!==-1)return l}let o=e.options.findIndex(n=>!n.dataRef.current.disabled);if(o!==-1)return o}return e.activeOptionIndex},activeOption:e=>{var o,n;let i=this.selectors.activeOptionIndex(e);return i===null?null:e.virtual?e.virtual.options[i??0]:(n=(o=e.options[i])==null?void 0:o.dataRef.current.value)!=null?n:null},isActive:(e,o,n)=>{var i;let l=this.selectors.activeOptionIndex(e);return l===null?!1:e.virtual?l===e.dataRef.current.calculateIndex(o):((i=e.options[l])==null?void 0:i.id)===n},shouldScrollIntoView:(e,o,n)=>!(e.virtual||e.__demoMode||e.comboboxState!==0||e.activationTrigger===0||!this.selectors.isActive(e,o,n)),didInputMove(e){return e.inputPositionState.kind==="Moved"}});{let e=this.state.id,o=ze.get(null);this.disposables.add(o.on(Ye.Push,n=>{!o.selectors.isTop(n,e)&&this.state.comboboxState===0&&this.actions.closeCombobox()})),this.on(0,()=>o.actions.push(e)),this.on(1,()=>o.actions.pop(e))}this.disposables.group(e=>{this.on(1,o=>{o.inputElement&&(e.dispose(),e.add(Je(o.inputElement,o.inputPositionState,()=>{this.send({type:12})})))})})}static new({id:s,virtual:e=null,__demoMode:o=!1}){var n;return new Ee({id:s,dataRef:{current:{}},comboboxState:o?0:1,isTyping:!1,options:[],virtual:e?{options:e.options,disabled:(n=e.disabled)!=null?n:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,inputElement:null,buttonElement:null,optionsElement:null,__demoMode:o,inputPositionState:ue.Idle})}reduce(s,e){return se(e.type,Qt,s,e)}}const Be=m.createContext(null);function fe(t){let s=m.useContext(Be);if(s===null){let e=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,je),e}return s}function je({id:t,virtual:s=null,__demoMode:e=!1}){let o=m.useMemo(()=>Ee.new({id:t,virtual:s,__demoMode:e}),[]);return et(()=>o.dispose()),o}let ce=m.createContext(null);ce.displayName="ComboboxDataContext";function ie(t){let s=m.useContext(ce);if(s===null){let e=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,ie),e}return s}let Ue=m.createContext(null);function Zt(t){let s=fe("VirtualProvider"),e=ie("VirtualProvider"),{options:o}=e.virtual,n=k(s,h=>h.optionsElement),[i,l]=m.useMemo(()=>{let h=n;if(!h)return[0,0];let p=window.getComputedStyle(h);return[parseFloat(p.paddingBlockStart||p.paddingTop),parseFloat(p.paddingBlockEnd||p.paddingBottom)]},[n]),r=Kt({enabled:o.length!==0,scrollPaddingStart:i,scrollPaddingEnd:l,count:o.length,estimateSize(){return 40},getScrollElement(){return s.state.optionsElement},overscan:12}),[u,a]=m.useState(0);Y(()=>{a(h=>h+1)},[o]);let c=r.getVirtualItems(),b=k(s,h=>h.activationTrigger===X.Pointer),d=k(s,s.selectors.activeOptionIndex);return c.length===0?null:V.createElement(Ue.Provider,{value:r},V.createElement("div",{style:{position:"relative",width:"100%",height:`${r.getTotalSize()}px`},ref:h=>{h&&(b||d!==null&&o.length>d&&r.scrollToIndex(d))}},c.map(h=>{var p;return V.createElement(m.Fragment,{key:h.key},V.cloneElement((p=t.children)==null?void 0:p.call(t,{...t.slot,option:o[h.index]}),{key:`${u}-${h.key}`,"data-index":h.index,"aria-setsize":o.length,"aria-posinset":h.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${h.start}px)`,overflowAnchor:"none"}}))})))}let en=m.Fragment;function tn(t,s){let e=m.useId(),o=nt(),{value:n,defaultValue:i,onChange:l,form:r,name:u,by:a,invalid:c=!1,disabled:b=o||!1,onClose:d,__demoMode:h=!1,multiple:p=!1,immediate:v=!1,virtual:x=null,nullable:M,...T}=t,$=ot(i),[O=p?[]:void 0,z]=st(n,l,$),S=je({id:e,virtual:x,__demoMode:h}),W=m.useRef({static:!1,hold:!1}),P=it(a),_=R(y=>x?a===null?x.options.indexOf(y):x.options.findIndex(Z=>P(Z,y)):S.state.options.findIndex(Z=>P(Z.dataRef.current.value,y))),q=m.useCallback(y=>se(N.mode,{[H.Multi]:()=>O.some(Z=>P(Z,y)),[H.Single]:()=>P(O,y)}),[O]),G=k(S,y=>y.virtual),E=R(()=>d?.()),N=m.useMemo(()=>({__demoMode:h,immediate:v,optionsPropsRef:W,value:O,defaultValue:$,disabled:b,invalid:c,mode:p?H.Multi:H.Single,virtual:x?G:null,onChange:z,isSelected:q,calculateIndex:_,compare:P,onClose:E}),[h,v,W,O,$,b,c,p,x,G,z,q,_,P,E]);Y(()=>{var y;x&&S.send({type:Ne.UpdateVirtualConfiguration,options:x.options,disabled:(y=x.disabled)!=null?y:null})},[x,x?.options,x?.disabled]),Y(()=>{S.state.dataRef.current=N},[N]);let[B,C,K,le]=k(S,y=>[y.comboboxState,y.buttonElement,y.inputElement,y.optionsElement]),J=ze.get(null),ne=k(J,m.useCallback(y=>J.selectors.isTop(y,e),[J,e]));lt(ne,[C,K,le],()=>S.actions.closeCombobox());let Q=k(S,S.selectors.activeOptionIndex),re=k(S,S.selectors.activeOption),f=de({open:B===g.Open,disabled:b,invalid:c,activeIndex:Q,activeOption:re,value:O}),[U,w]=rt(),D=s===null?{}:{ref:s},I=m.useCallback(()=>{if($!==void 0)return z?.($)},[z,$]),L=he();return V.createElement(w,{value:U,props:{htmlFor:K?.id},slot:{open:B===g.Open,disabled:b}},V.createElement(at,null,V.createElement(ce.Provider,{value:N},V.createElement(Be.Provider,{value:S},V.createElement($t,{value:se(B,{[g.Open]:me.Open,[g.Closed]:me.Closed})},u!=null&&V.createElement(ut,{disabled:b,data:O!=null?{[u]:O}:{},form:r,onReset:I}),L({ourProps:D,theirProps:T,slot:f,defaultTag:en,name:"Combobox"}))))))}let nn="input";function on(t,s){var e,o;let n=fe("Combobox.Input"),i=ie("Combobox.Input"),l=m.useId(),r=mt(),{id:u=r||`headlessui-combobox-input-${l}`,onChange:a,displayValue:c,disabled:b=i.disabled||!1,autoFocus:d=!1,type:h="text",...p}=t,v=m.useRef(null),x=ve(v,s,vt(),n.actions.setInputElement),[M,T]=k(n,f=>[f.comboboxState,f.isTyping]),$=Rt(),O=R(()=>{n.actions.onChange(null),n.state.optionsElement&&(n.state.optionsElement.scrollTop=0),n.actions.goToOption({focus:A.Nothing})}),z=m.useMemo(()=>{var f;return typeof c=="function"&&i.value!==void 0?(f=c(i.value))!=null?f:"":typeof i.value=="string"?i.value:""},[i.value,c]);Fe(([f,U],[w,D])=>{if(n.state.isTyping)return;let I=v.current;I&&((D===g.Open&&U===g.Closed||f!==w)&&(I.value=f),requestAnimationFrame(()=>{if(n.state.isTyping||!I||ke(I))return;let{selectionStart:L,selectionEnd:y}=I;Math.abs((y??0)-(L??0))===0&&L===0&&I.setSelectionRange(I.value.length,I.value.length)}))},[z,M,T]),Fe(([f],[U])=>{if(f===g.Open&&U===g.Closed){if(n.state.isTyping)return;let w=v.current;if(!w)return;let D=w.value,{selectionStart:I,selectionEnd:L,selectionDirection:y}=w;w.value="",w.value=D,y!==null?w.setSelectionRange(I,L,y):w.setSelectionRange(I,L)}},[M]);let S=m.useRef(!1),W=R(()=>{S.current=!0}),P=R(()=>{$.nextFrame(()=>{S.current=!1})}),_=R(f=>{switch(n.actions.setIsTyping(!0),f.key){case j.Enter:if(n.state.comboboxState!==g.Open||S.current)return;if(f.preventDefault(),f.stopPropagation(),n.selectors.activeOptionIndex(n.state)===null){n.actions.closeCombobox();return}n.actions.selectActiveOption(),i.mode===H.Single&&n.actions.closeCombobox();break;case j.ArrowDown:return f.preventDefault(),f.stopPropagation(),se(n.state.comboboxState,{[g.Open]:()=>n.actions.goToOption({focus:A.Next}),[g.Closed]:()=>n.actions.openCombobox()});case j.ArrowUp:return f.preventDefault(),f.stopPropagation(),se(n.state.comboboxState,{[g.Open]:()=>n.actions.goToOption({focus:A.Previous}),[g.Closed]:()=>{te.flushSync(()=>n.actions.openCombobox()),i.value||n.actions.goToOption({focus:A.Last})}});case j.Home:if(n.state.comboboxState===g.Closed||f.shiftKey)break;return f.preventDefault(),f.stopPropagation(),n.actions.goToOption({focus:A.First});case j.PageUp:return f.preventDefault(),f.stopPropagation(),n.actions.goToOption({focus:A.First});case j.End:if(n.state.comboboxState===g.Closed||f.shiftKey)break;return f.preventDefault(),f.stopPropagation(),n.actions.goToOption({focus:A.Last});case j.PageDown:return f.preventDefault(),f.stopPropagation(),n.actions.goToOption({focus:A.Last});case j.Escape:return n.state.comboboxState!==g.Open?void 0:(f.preventDefault(),n.state.optionsElement&&!i.optionsPropsRef.current.static&&f.stopPropagation(),i.mode===H.Single&&i.value===null&&O(),n.actions.closeCombobox());case j.Tab:if(n.actions.setIsTyping(!1),n.state.comboboxState!==g.Open)return;i.mode===H.Single&&n.state.activationTrigger!==X.Focus&&n.actions.selectActiveOption(),n.actions.closeCombobox();break}}),q=R(f=>{a?.(f),i.mode===H.Single&&f.target.value===""&&O(),n.actions.openCombobox()}),G=R(f=>{var U,w,D;let I=(U=f.relatedTarget)!=null?U:ee.find(L=>L!==f.currentTarget);if(!((w=n.state.optionsElement)!=null&&w.contains(I))&&!((D=n.state.buttonElement)!=null&&D.contains(I))&&n.state.comboboxState===g.Open)return f.preventDefault(),i.mode===H.Single&&i.value===null&&O(),n.actions.closeCombobox()}),E=R(f=>{var U,w,D;let I=(U=f.relatedTarget)!=null?U:ee.find(L=>L!==f.currentTarget);(w=n.state.buttonElement)!=null&&w.contains(I)||(D=n.state.optionsElement)!=null&&D.contains(I)||i.disabled||i.immediate&&n.state.comboboxState!==g.Open&&$.microTask(()=>{te.flushSync(()=>n.actions.openCombobox()),n.actions.setActivationTrigger(X.Focus)})}),N=be(),B=gt(),{isFocused:C,focusProps:K}=De({autoFocus:d}),{isHovered:le,hoverProps:J}=_e({isDisabled:b}),ne=k(n,f=>f.optionsElement),Q=de({open:M===g.Open,disabled:b,invalid:i.invalid,hover:le,focus:C,autofocus:d}),re=xe({ref:x,id:u,role:"combobox",type:h,"aria-controls":ne?.id,"aria-expanded":M===g.Open,"aria-activedescendant":k(n,n.selectors.activeDescendantId),"aria-labelledby":N,"aria-describedby":B,"aria-autocomplete":"list",defaultValue:(o=(e=t.defaultValue)!=null?e:i.defaultValue!==void 0?c?.(i.defaultValue):null)!=null?o:i.defaultValue,disabled:b||void 0,autoFocus:d,onCompositionStart:W,onCompositionEnd:P,onKeyDown:_,onChange:q,onFocus:E,onBlur:G},K,J);return he()({ourProps:re,theirProps:p,slot:Q,defaultTag:nn,name:"Combobox.Input"})}let sn="button";function ln(t,s){let e=fe("Combobox.Button"),o=ie("Combobox.Button"),[n,i]=m.useState(null),l=ve(s,i,e.actions.setButtonElement),r=m.useId(),{id:u=`headlessui-combobox-button-${r}`,disabled:a=o.disabled||!1,autoFocus:c=!1,...b}=t,[d,h,p]=k(e,E=>[E.comboboxState,E.inputElement,E.optionsElement]),v=We(h),x=d===g.Open;ct(x,{trigger:n,action:m.useCallback(E=>{if(n!=null&&n.contains(E.target))return ae.Ignore;if(h!=null&&h.contains(E.target))return ae.Ignore;let N=E.target.closest('[role="option"]:not([data-disabled])');return dt(N)?ae.Select(N):p!=null&&p.contains(E.target)?ae.Ignore:ae.Close},[n,h,p]),close:e.actions.closeCombobox,select:e.actions.selectActiveOption});let M=R(E=>{switch(E.key){case j.Space:case j.Enter:E.preventDefault(),E.stopPropagation(),e.state.comboboxState===g.Closed&&te.flushSync(()=>e.actions.openCombobox()),v();return;case j.ArrowDown:E.preventDefault(),E.stopPropagation(),e.state.comboboxState===g.Closed&&(te.flushSync(()=>e.actions.openCombobox()),e.state.dataRef.current.value||e.actions.goToOption({focus:A.First})),v();return;case j.ArrowUp:E.preventDefault(),E.stopPropagation(),e.state.comboboxState===g.Closed&&(te.flushSync(()=>e.actions.openCombobox()),e.state.dataRef.current.value||e.actions.goToOption({focus:A.Last})),v();return;case j.Escape:if(e.state.comboboxState!==g.Open)return;E.preventDefault(),e.state.optionsElement&&!o.optionsPropsRef.current.static&&E.stopPropagation(),te.flushSync(()=>e.actions.closeCombobox()),v();return;default:return}}),T=pt(()=>{e.state.comboboxState===g.Open?e.actions.closeCombobox():e.actions.openCombobox(),v()}),$=be([u]),{isFocusVisible:O,focusProps:z}=De({autoFocus:c}),{isHovered:S,hoverProps:W}=_e({isDisabled:a}),{pressed:P,pressProps:_}=ht({disabled:a}),q=de({open:d===g.Open,active:P||d===g.Open,disabled:a,invalid:o.invalid,value:o.value,hover:S,focus:O}),G=xe({ref:l,id:u,type:ft(t,n),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":p?.id,"aria-expanded":d===g.Open,"aria-labelledby":$,disabled:a||void 0,autoFocus:c,onKeyDown:M},T,z,W,_);return he()({ourProps:G,theirProps:b,slot:q,defaultTag:sn,name:"Combobox.Button"})}let rn="div",an=we.RenderStrategy|we.Static;function un(t,s){var e,o,n;let i=m.useId(),{id:l=`headlessui-combobox-options-${i}`,hold:r=!1,anchor:u,portal:a=!1,modal:c=!0,transition:b=!1,...d}=t,h=fe("Combobox.Options"),p=ie("Combobox.Options"),v=bt(u);v&&(a=!0);let[x,M]=xt(v),[T,$]=m.useState(null),O=Et(),z=ve(s,v?x:null,h.actions.setOptionsElement,$),[S,W,P,_,q]=k(h,F=>[F.comboboxState,F.inputElement,F.buttonElement,F.optionsElement,F.activationTrigger]),G=Ce(W||P),E=Ce(_),N=Pt(),[B,C]=Ft(b,T,N!==null?(N&me.Open)===me.Open:S===g.Open);St(B,W,h.actions.closeCombobox);let K=p.__demoMode?!1:c&&S===g.Open;Ot(K,E);let le=p.__demoMode?!1:c&&S===g.Open;Ct(le,{allowed:m.useCallback(()=>[W,P,_],[W,P,_])});let J=k(h,h.selectors.didInputMove)?!1:B;Y(()=>{var F;p.optionsPropsRef.current.static=(F=t.static)!=null?F:!1},[p.optionsPropsRef,t.static]),Y(()=>{p.optionsPropsRef.current.hold=r},[p.optionsPropsRef,r]),Gt(S===g.Open,{container:_,accept(F){return F.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:F.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(F){F.setAttribute("role","none")}});let ne=be([P?.id]),Q=de({open:S===g.Open,option:void 0}),re=R(()=>{h.actions.setActivationTrigger(X.Pointer)}),f=R(F=>{F.preventDefault(),h.actions.setActivationTrigger(X.Pointer)}),U=xe(v?O():{},{"aria-labelledby":ne,role:"listbox","aria-multiselectable":p.mode===H.Multi?!0:void 0,id:l,ref:z,style:{...d.style,...M,"--input-width":ye(B,W,!0).width,"--button-width":ye(B,P,!0).width},onWheel:q===X.Pointer?void 0:re,onMouseDown:f,...At(C)}),w=B&&S===g.Closed&&!t.static,D=Ie(w,(e=p.virtual)==null?void 0:e.options),I=Ie(w,p.value),L=m.useCallback(F=>p.compare(I,F),[p.compare,I]),y=m.useMemo(()=>{if(!p.virtual)return p;if(D===void 0)throw new Error("Missing `options` in virtual mode");return D!==p.virtual.options?{...p,virtual:{...p.virtual,options:D}}:p},[p,D,(o=p.virtual)==null?void 0:o.options]);p.virtual&&Object.assign(d,{children:V.createElement(ce.Provider,{value:y},V.createElement(Zt,{slot:Q},d.children))});let Z=he(),He=m.useMemo(()=>p.mode===H.Multi?p:{...p,isSelected:L},[p,L]);return V.createElement(yt,{enabled:a?t.static||B:!1,ownerDocument:G},V.createElement(ce.Provider,{value:He},Z({ourProps:U,theirProps:{...d,children:V.createElement(It,{freeze:w},typeof d.children=="function"?(n=d.children)==null?void 0:n.call(d,Q):d.children)},slot:Q,defaultTag:rn,features:an,visible:J,name:"Combobox.Options"})))}let cn="div";function dn(t,s){var e,o,n;let i=ie("Combobox.Option"),l=fe("Combobox.Option"),r=m.useId(),{id:u=`headlessui-combobox-option-${r}`,value:a,disabled:c=(n=(o=(e=i.virtual)==null?void 0:e.disabled)==null?void 0:o.call(e,a))!=null?n:!1,order:b=null,...d}=t,[h]=k(l,C=>[C.inputElement]),p=We(h),v=k(l,m.useCallback(C=>l.selectors.isActive(C,a,u),[a,u])),x=i.isSelected(a),M=m.useRef(null),T=Le({disabled:c,value:a,domRef:M,order:b}),$=m.useContext(Ue),O=ve(s,M,$?$.measureElement:null),z=R(()=>{l.actions.setIsTyping(!1),l.actions.onChange(a)});Y(()=>l.actions.registerOption(u,T),[T,u]);let S=k(l,m.useCallback(C=>l.selectors.shouldScrollIntoView(C,a,u),[a,u]));Y(()=>{if(S)return kt().requestAnimationFrame(()=>{var C,K;(K=(C=M.current)==null?void 0:C.scrollIntoView)==null||K.call(C,{block:"nearest"})})},[S,M]);let W=R(C=>{C.preventDefault(),C.button===wt.Left&&(c||(z(),Mt()||requestAnimationFrame(()=>p()),i.mode===H.Single&&l.actions.closeCombobox()))}),P=R(()=>{if(c)return l.actions.goToOption({focus:A.Nothing});let C=i.calculateIndex(a);l.actions.goToOption({focus:A.Specific,idx:C})}),_=Tt(),q=R(C=>_.update(C)),G=R(C=>{if(!_.wasMoved(C)||c||v&&l.state.activationTrigger===X.Pointer)return;let K=i.calculateIndex(a);l.actions.goToOption({focus:A.Specific,idx:K},X.Pointer)}),E=R(C=>{_.wasMoved(C)&&(c||v&&(i.optionsPropsRef.current.hold||l.state.activationTrigger===X.Pointer&&l.actions.goToOption({focus:A.Nothing})))}),N=de({active:v,focus:v,selected:x,disabled:c}),B={id:u,ref:O,role:"option",tabIndex:c===!0?void 0:-1,"aria-disabled":c===!0?!0:void 0,"aria-selected":x,disabled:void 0,onMouseDown:W,onFocus:P,onPointerEnter:q,onMouseEnter:q,onPointerMove:G,onMouseMove:G,onPointerLeave:E,onMouseLeave:E};return he()({ourProps:B,theirProps:d,slot:N,defaultTag:cn,name:"Combobox.Option"})}let pn=pe(tn),hn=pe(ln),fn=pe(on),mn=tt,vn=pe(un),gn=pe(dn),Sn=Object.assign(pn,{Input:fn,Button:hn,Label:mn,Options:vn,Option:gn});export{hn as B,Sn as H,vn as U,gn as a,fn as k};
